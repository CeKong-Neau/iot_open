/*
Waypoints - 4.0.0
Copyright Â© 2011-2015 Caleb Troughton
Licensed under the MIT license.
https://github.com/imakewebthings/waypoints/blog/master/licenses.txt
*/
!function(){function C(D){if(!D){throw new Error("No options passed to Waypoint constructor")}if(!D.element){throw new Error("No element option passed to Waypoint constructor")}if(!D.handler){throw new Error("No handler option passed to Waypoint constructor")}this.key="waypoint-"+B,this.options=C.Adapter.extend({},C.defaults,D),this.element=this.options.element,this.adapter=new C.Adapter(this.element),this.callback=D.handler,this.axis=this.options.horizontal?"horizontal":"vertical",this.enabled=this.options.enabled,this.triggerPoint=null,this.group=C.Group.findOrCreate({name:this.options.group,axis:this.axis}),this.context=C.Context.findOrCreateByElement(this.options.context),C.offsetAliases[this.options.offset]&&(this.options.offset=C.offsetAliases[this.options.offset]),this.group.add(this),this.context.add(this),A[this.key]=this,B+=1}var B=0,A={};C.prototype.queueTrigger=function(D){this.group.queueTrigger(this,D)},C.prototype.trigger=function(D){this.enabled&&this.callback&&this.callback.apply(this,D)},C.prototype.destroy=function(){this.context.remove(this),this.group.remove(this),delete A[this.key]},C.prototype.disable=function(){return this.enabled=!1,this},C.prototype.enable=function(){return this.context.refresh(),this.enabled=!0,this},C.prototype.next=function(){return this.group.next(this)},C.prototype.previous=function(){return this.group.previous(this)},C.invokeAll=function(H){var E=[];for(var F in A){E.push(A[F])}for(var G=0,D=E.length;D>G;G++){E[G][H]()}},C.destroyAll=function(){C.invokeAll("destroy")},C.disableAll=function(){C.invokeAll("disable")},C.enableAll=function(){C.invokeAll("enable")},C.refreshAll=function(){C.Context.refreshAll()},C.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight},C.viewportWidth=function(){return document.documentElement.clientWidth},C.adapters=[],C.defaults={context:window,continuous:!0,enabled:!0,group:"default",horizontal:!1,offset:0},C.offsetAliases={"bottom-in-view":function(){return this.context.innerHeight()-this.adapter.outerHeight()},"right-in-view":function(){return this.context.innerWidth()-this.adapter.outerWidth()}},window.Waypoint=C}(),function(){function F(G){window.setTimeout(G,1000/60)}function B(G){this.element=G,this.Adapter=D.Adapter,this.adapter=new this.Adapter(G),this.key="waypoint-context-"+A,this.didScroll=!1,this.didResize=!1,this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()},this.waypoints={vertical:{},horizontal:{}},G.waypointContextKey=this.key,C[G.waypointContextKey]=this,A+=1,this.createThrottledScrollHandler(),this.createThrottledResizeHandler()}var A=0,C={},D=window.Waypoint,E=window.onload;B.prototype.add=function(H){var G=H.options.horizontal?"horizontal":"vertical";this.waypoints[G][H.key]=H,this.refresh()},B.prototype.checkEmpty=function(){var H=this.Adapter.isEmptyObject(this.waypoints.horizontal),G=this.Adapter.isEmptyObject(this.waypoints.vertical);H&&G&&(this.adapter.off(".waypoints"),delete C[this.key])},B.prototype.createThrottledResizeHandler=function(){function H(){G.handleResize(),G.didResize=!1}var G=this;this.adapter.on("resize.waypoints",function(){G.didResize||(G.didResize=!0,D.requestAnimationFrame(H))})},B.prototype.createThrottledScrollHandler=function(){function H(){G.handleScroll(),G.didScroll=!1}var G=this;this.adapter.on("scroll.waypoints",function(){(!G.didScroll||D.isTouch)&&(G.didScroll=!0,D.requestAnimationFrame(H))})},B.prototype.handleResize=function(){D.Context.refreshAll()},B.prototype.handleScroll=function(){var K={},J={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.adapter.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};for(var N in J){var P=J[N],O=P.newScroll>P.oldScroll,G=O?P.forward:P.backward;for(var H in this.waypoints[N]){var S=this.waypoints[N][H],Q=P.oldScroll<S.triggerPoint,M=P.newScroll>=S.triggerPoint,I=Q&&M,L=!Q&&!M;(I||L)&&(S.queueTrigger(G),K[S.group.id]=S.group)}}for(var R in K){K[R].flushTriggers()}this.oldScroll={x:J.horizontal.newScroll,y:J.vertical.newScroll}},B.prototype.innerHeight=function(){return this.element==this.element.window?D.viewportHeight():this.adapter.innerHeight()},B.prototype.remove=function(G){delete this.waypoints[G.axis][G.key],this.checkEmpty()},B.prototype.innerWidth=function(){return this.element==this.element.window?D.viewportWidth():this.adapter.innerWidth()},B.prototype.destroy=function(){var K=[];for(var H in this.waypoints){for(var G in this.waypoints[H]){K.push(this.waypoints[H][G])}}for(var I=0,J=K.length;J>I;I++){K[I].destroy()}},B.prototype.refresh=function(){var K,V=this.element==this.element.window,N=V?void 0:this.adapter.offset(),O={};this.handleScroll(),K={horizontal:{contextOffset:V?0:N.left,contextScroll:V?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:V?0:N.top,contextScroll:V?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}};for(var G in K){var H=K[G];for(var R in this.waypoints[G]){var P,M,I,L,Q,U=this.waypoints[G][R],S=U.options.offset,J=U.triggerPoint,W=0,T=null==J;U.element!==U.element.window&&(W=U.adapter.offset()[H.offsetProp]),"function"==typeof S?S=S.apply(U):"string"==typeof S&&(S=parseFloat(S),U.options.offset.indexOf("%")>-1&&(S=Math.ceil(H.contextDimension*S/100))),P=H.contextScroll-H.contextOffset,U.triggerPoint=W+P-S,M=J<H.oldScroll,I=U.triggerPoint>=H.oldScroll,L=M&&I,Q=!M&&!I,!T&&L?(U.queueTrigger(H.backward),O[U.group.id]=U.group):!T&&Q?(U.queueTrigger(H.forward),O[U.group.id]=U.group):T&&H.oldScroll>=U.triggerPoint&&(U.queueTrigger(H.forward),O[U.group.id]=U.group)}}return D.requestAnimationFrame(function(){for(var X in O){O[X].flushTriggers()}}),this},B.findOrCreateByElement=function(G){return B.findByElement(G)||new B(G)},B.refreshAll=function(){for(var G in C){C[G].refresh()}},B.findByElement=function(G){return C[G.waypointContextKey]},window.onload=function(){E&&E(),B.refreshAll()},D.requestAnimationFrame=function(H){var G=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||F;G.call(window,H)},D.Context=B}(),function(){function E(G,F){return G.triggerPoint-F.triggerPoint}function B(G,F){return F.triggerPoint-G.triggerPoint}function A(F){this.name=F.name,this.axis=F.axis,this.id=this.name+"-"+this.axis,this.waypoints=[],this.clearTriggerQueues(),C[this.axis][this.name]=this}var C={vertical:{},horizontal:{}},D=window.Waypoint;A.prototype.add=function(F){this.waypoints.push(F)},A.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}},A.prototype.flushTriggers=function(){for(var F in this.triggerQueues){var H=this.triggerQueues[F],G="up"===F||"left"===F;H.sort(G?B:E);for(var I=0,J=H.length;J>I;I+=1){var K=H[I];(K.options.continuous||I===H.length-1)&&K.trigger([F])}}this.clearTriggerQueues()},A.prototype.next=function(G){this.waypoints.sort(E);var F=D.Adapter.inArray(G,this.waypoints),H=F===this.waypoints.length-1;return H?null:this.waypoints[F+1]},A.prototype.previous=function(G){this.waypoints.sort(E);var F=D.Adapter.inArray(G,this.waypoints);return F?this.waypoints[F-1]:null},A.prototype.queueTrigger=function(G,F){this.triggerQueues[F].push(G)},A.prototype.remove=function(G){var F=D.Adapter.inArray(G,this.waypoints);F>-1&&this.waypoints.splice(F,1)},A.prototype.first=function(){return this.waypoints[0]},A.prototype.last=function(){return this.waypoints[this.waypoints.length-1]},A.findOrCreate=function(F){return C[F.axis][F.name]||new A(F)},D.Group=A}(),function(){function C(D){this.$element=B(D)}var B=window.jQuery,A=window.Waypoint;B.each(["innerHeight","innerWidth","off","offset","on","outerHeight","outerWidth","scrollLeft","scrollTop"],function(E,D){C.prototype[D]=function(){var F=Array.prototype.slice.call(arguments);return this.$element[D].apply(this.$element,F)}}),B.each(["extend","inArray","isEmptyObject"],function(D,E){C[E]=B[E]}),A.adapters.push({name:"jquery",Adapter:C}),A.Adapter=C}(),function(){function B(C){return function(){var D=[],E=arguments[0];return C.isFunction(arguments[0])&&(E=C.extend({},arguments[1]),E.handler=arguments[0]),this.each(function(){var F=C.extend({},E,{element:this});"string"==typeof F.context&&(F.context=C(this).closest(F.context)[0]),D.push(new A(F))}),D}}var A=window.Waypoint;window.jQuery&&(window.jQuery.fn.waypoint=B(window.jQuery)),window.Zepto&&(window.Zepto.fn.waypoint=B(window.Zepto))}();