(function(D){var C={tooltip:!1,tooltipOpts:{content:"%s | X: %x | Y: %y",xDateFormat:null,yDateFormat:null,shifts:{x:10,y:20},defaultTheme:!0,onHover:function(){}}},A=function(E){this.tipPosition={x:0,y:0},this.init(E)};A.prototype.init=function(G){function E(J){var I={};I.x=J.pageX,I.y=J.pageY,H.updateTooltipPosition(I)}function F(M,K,I){var J=H.getDomElement();if(I){var L;L=H.stringFormat(H.tooltipOptions.content,I),J.html(L),H.updateTooltipPosition({x:K.pageX,y:K.pageY}),J.css({left:H.tipPosition.x+H.tooltipOptions.shifts.x,top:H.tipPosition.y+H.tooltipOptions.shifts.y}).show(),"function"==typeof H.tooltipOptions.onHover&&H.tooltipOptions.onHover(I,J)}else{J.hide().html("")}}var H=this;G.hooks.bindEvents.push(function(J,I){H.plotOptions=J.getOptions(),H.plotOptions.tooltip!==!1&&void 0!==H.plotOptions.tooltip&&(H.tooltipOptions=H.plotOptions.tooltipOpts,H.getDomElement(),D(J.getPlaceholder()).bind("plothover",F),D(I).bind("mousemove",E))}),G.hooks.shutdown.push(function(J,I){D(J.getPlaceholder()).unbind("plothover",F),D(I).unbind("mousemove",E)})},A.prototype.getDomElement=function(){var E;return D("#flotTip").length>0?E=D("#flotTip"):(E=D("<div />").attr("id","flotTip"),E.appendTo("body").hide().css({position:"absolute"}),this.tooltipOptions.defaultTheme&&E.css({background:"#fff","z-index":"100",padding:"0.4em 0.6em","border-radius":"0.5em","font-size":"0.8em",border:"1px solid #111",display:"none","white-space":"nowrap"})),E},A.prototype.updateTooltipPosition=function(G){var E=D("#flotTip").outerWidth()+this.tooltipOptions.shifts.x,F=D("#flotTip").outerHeight()+this.tooltipOptions.shifts.y;G.x-D(window).scrollLeft()>D(window).innerWidth()-E&&(G.x-=E),G.y-D(window).scrollTop()>D(window).innerHeight()-F&&(G.y-=F),this.tipPosition.x=G.x,this.tipPosition.y=G.y},A.prototype.stringFormat=function(J,G){var E=/%p\.{0,1}(\d{0,})/,F=/%s/,H=/%x\.{0,1}(?:\d{0,})/,I=/%y\.{0,1}(?:\d{0,})/;return"function"==typeof J&&(J=J(G.series.label,G.series.data[G.dataIndex][0],G.series.data[G.dataIndex][1],G)),G.series.percent!==void 0&&(J=this.adjustValPrecision(E,J,G.series.percent)),G.series.label!==void 0&&(J=J.replace(F,G.series.label)),this.isTimeMode("xaxis",G)&&this.isXDateFormat(G)&&(J=J.replace(H,this.timestampToDate(G.series.data[G.dataIndex][0],this.tooltipOptions.xDateFormat))),this.isTimeMode("yaxis",G)&&this.isYDateFormat(G)&&(J=J.replace(I,this.timestampToDate(G.series.data[G.dataIndex][1],this.tooltipOptions.yDateFormat))),"number"==typeof G.series.data[G.dataIndex][0]&&(J=this.adjustValPrecision(H,J,G.series.data[G.dataIndex][0])),"number"==typeof G.series.data[G.dataIndex][1]&&(J=this.adjustValPrecision(I,J,G.series.data[G.dataIndex][1])),G.series.xaxis.tickFormatter!==void 0&&(J=J.replace(H,G.series.xaxis.tickFormatter(G.series.data[G.dataIndex][0],G.series.xaxis))),G.series.yaxis.tickFormatter!==void 0&&(J=J.replace(I,G.series.yaxis.tickFormatter(G.series.data[G.dataIndex][1],G.series.yaxis))),J},A.prototype.isTimeMode=function(F,E){return E.series[F].options.mode!==void 0&&"time"===E.series[F].options.mode},A.prototype.isXDateFormat=function(){return this.tooltipOptions.xDateFormat!==void 0&&null!==this.tooltipOptions.xDateFormat},A.prototype.isYDateFormat=function(){return this.tooltipOptions.yDateFormat!==void 0&&null!==this.tooltipOptions.yDateFormat},A.prototype.timestampToDate=function(G,E){var F=new Date(G);return D.plot.formatDate(F,E)},A.prototype.adjustValPrecision=function(I,G,E){var F,H=G.match(I);return null!==H&&""!==RegExp.$1&&(F=RegExp.$1,E=E.toFixed(F),G=G.replace(I,E)),G};var B=function(E){new A(E)};D.plot.plugins.push({init:B,options:C,name:"tooltip",version:"0.6.1"})})(jQuery);