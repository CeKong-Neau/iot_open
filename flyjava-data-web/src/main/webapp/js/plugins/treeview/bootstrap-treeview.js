(function(G,A,B,D){var C="treeview";var E=function(I,H){this.$element=G(I);this._element=I;this._elementId=this._element.id;this._styleId=this._elementId+"-style";this.tree=[];this.nodes=[];this.selectedNode={};this._init(H)};E.defaults={injectStyle:true,levels:2,expandIcon:"glyphicon glyphicon-plus",collapseIcon:"glyphicon glyphicon-minus",nodeIcon:"glyphicon glyphicon-stop",color:D,backColor:D,borderColor:D,onhoverColor:"#F5F5F5",selectedColor:"#FFFFFF",selectedBackColor:"#428bca",enableLinks:false,highlightSelected:true,showBorder:true,showTags:false,onNodeSelected:D};E.prototype={remove:function(){this._destroy();G.removeData(this,"plugin_"+C);G("#"+this._styleId).remove()},_destroy:function(){if(this.initialized){this.$wrapper.remove();this.$wrapper=null;this._unsubscribeEvents()}this.initialized=false},_init:function(H){if(H.data){if(typeof H.data==="string"){H.data=G.parseJSON(H.data)}this.tree=G.extend(true,[],H.data);delete H.data}this.options=G.extend({},E.defaults,H);this._setInitialLevels(this.tree,0);this._destroy();this._subscribeEvents();this._render()},_unsubscribeEvents:function(){this.$element.off("click")},_subscribeEvents:function(){this._unsubscribeEvents();this.$element.on("click",G.proxy(this._clickHandler,this));if(typeof(this.options.onNodeSelected)==="function"){this.$element.on("nodeSelected",this.options.onNodeSelected)}},_clickHandler:function(I){if(!this.options.enableLinks){I.preventDefault()}var J=G(I.target),K=J.attr("class")?J.attr("class").split(" "):[],H=this._findNode(J);if((K.indexOf("click-expand")!=-1)||(K.indexOf("click-collapse")!=-1)){this._toggleNodes(H);this._render()}else{if(H){this._setSelectedNode(H)}}},_findNode:function(J){var H=J.closest("li.list-group-item").attr("data-nodeid"),I=this.nodes[H];if(!I){console.log("Error: node does not exist")}return I},_triggerNodeSelectedEvent:function(H){this.$element.trigger("nodeSelected",[G.extend(true,{},H)])},_setSelectedNode:function(H){if(!H){return}if(H===this.selectedNode){this.selectedNode={}}else{this._triggerNodeSelectedEvent(this.selectedNode=H)}this._render()},_setInitialLevels:function(K,J){if(!K){return}J+=1;var I=this;G.each(K,function H(N,L){if(J>=I.options.levels){I._toggleNodes(L)}var M=L.nodes?L.nodes:L._nodes?L._nodes:D;if(M){return I._setInitialLevels(M,J)}})},_toggleNodes:function(H){if(!H.nodes&&!H._nodes){return}if(H.nodes){H._nodes=H.nodes;delete H.nodes}else{H.nodes=H._nodes;delete H._nodes}},_render:function(){var H=this;if(!H.initialized){H.$element.addClass(C);H.$wrapper=G(H._template.list);H._injectStyle();H.initialized=true}H.$element.empty().append(H.$wrapper.empty());H.nodes=[];H._buildTree(H.tree,0)},_buildTree:function(K,J){if(!K){return}J+=1;var I=this;G.each(K,function H(P,N){N.nodeId=I.nodes.length;I.nodes.push(N);var L=G(I._template.item).addClass("node-"+I._elementId).addClass((N===I.selectedNode)?"node-selected":"").attr("data-nodeid",N.nodeId).attr("style",I._buildStyleOverride(N));for(var M=0;M<(J-1);M++){L.append(I._template.indent)}if(N._nodes){L.append(G(I._template.iconWrapper).append(G(I._template.icon).addClass("click-expand").addClass(I.options.expandIcon)))}else{if(N.nodes){L.append(G(I._template.iconWrapper).append(G(I._template.icon).addClass("click-collapse").addClass(I.options.collapseIcon)))}else{L.append(G(I._template.iconWrapper).append(G(I._template.icon).addClass("glyphicon")))}}L.append(G(I._template.iconWrapper).append(G(I._template.icon).addClass(N.icon?N.icon:I.options.nodeIcon)));if(I.options.enableLinks){L.append(G(I._template.link).attr("href",N.href).append(N.text))}else{L.append(N.text)}if(I.options.showTags&&N.tags){G.each(N.tags,function O(R,Q){L.append(G(I._template.badge).append(Q))})}I.$wrapper.append(L);if(N.nodes){return I._buildTree(N.nodes,J)}})},_buildStyleOverride:function(H){var I="";if(this.options.highlightSelected&&(H===this.selectedNode)){I+="color:"+this.options.selectedColor+";"}else{if(H.color){I+="color:"+H.color+";"}}if(this.options.highlightSelected&&(H===this.selectedNode)){I+="background-color:"+this.options.selectedBackColor+";"}else{if(H.backColor){I+="background-color:"+H.backColor+";"}}return I},_injectStyle:function(){if(this.options.injectStyle&&!B.getElementById(this._styleId)){G('<style type="text/css" id="'+this._styleId+'"> '+this._buildStyle()+" </style>").appendTo("head")}},_buildStyle:function(){var H=".node-"+this._elementId+"{";if(this.options.color){H+="color:"+this.options.color+";"}if(this.options.backColor){H+="background-color:"+this.options.backColor+";"}if(!this.options.showBorder){H+="border:none;"}else{if(this.options.borderColor){H+="border:1px solid "+this.options.borderColor+";"}}H+="}";if(this.options.onhoverColor){H+=".node-"+this._elementId+":hover{background-color:"+this.options.onhoverColor+";}"}return this._css+H},_template:{list:'<ul class="list-group"></ul>',item:'<li class="list-group-item"></li>',indent:'<span class="indent"></span>',iconWrapper:'<span class="icon"></span>',icon:"<i></i>",link:'<a href="#" style="color:inherit;"></a>',badge:'<span class="badge"></span>'},_css:".list-group-item{cursor:pointer;}span.indent{margin-left:10px;margin-right:10px}span.icon{margin-right:5px}"};var F=function(H){if(A.console){A.console.error(H)}};G.fn[C]=function(H,I){return this.each(function(){var J=G.data(this,"plugin_"+C);if(typeof H==="string"){if(!J){F("Not initialized, can not call method : "+H)}else{if(!G.isFunction(J[H])||H.charAt(0)==="_"){F("No such method : "+H)}else{if(typeof I==="string"){I=[I]}J[H].apply(J,I)}}}else{if(!J){G.data(this,"plugin_"+C,new E(this,G.extend(true,{},H)))}else{J._init(H)}}})}})(jQuery,window,document);