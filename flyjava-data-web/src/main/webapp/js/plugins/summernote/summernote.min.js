!function(A){"function"==typeof define&&define.amd?define(["jquery","codemirror"],A):A(window.jQuery,window.CodeMirror)}(function(R,P){"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(g,Y){var Z,W,X=this.length>>>0,h=!1;for(1<arguments.length&&(W=Y,h=!0),Z=0;X>Z;++Z){this.hasOwnProperty(Z)&&(h?W=g(W,this[Z],Z,this):(W=this[Z],h=!0))}if(!h){throw new TypeError("Reduce of empty array with no initial value")}return W});var Q={bMac:navigator.appVersion.indexOf("Mac")>-1,bMSIE:navigator.userAgent.indexOf("MSIE")>-1||navigator.userAgent.indexOf("Trident")>-1,bFF:navigator.userAgent.indexOf("Firefox")>-1,jqueryVersion:parseFloat(R.fn.jquery),bCodeMirror:!!P},U=function(){var g=function(b){return function(a){return b===a}},Y=function(d,c){return d===c},Z=function(){return !0},W=function(){return !1},X=function(b){return function(){return !b.apply(b,arguments)}},h=function(b){return b};return{eq:g,eq2:Y,ok:Z,fail:W,not:X,self:h}}(),V=function(){var n=function(b){return b[0]},l=function(b){return b[b.length-1]},m=function(b){return b.slice(0,b.length-1)},W=function(b){return b.slice(1)},o=function(g,e){var f=g.indexOf(e);return -1===f?null:g[f+1]},p=function(g,e){var f=g.indexOf(e);return -1===f?null:g[f-1]},Z=function(e,c){return c=c||U.self,e.reduce(function(f,b){return f+c(b)},0)},d=function(h){for(var f=[],g=-1,e=h.length;++g<e;){f[g]=h[g]}return f},X=function(b,a){if(0===b.length){return[]}var e=W(b);return e.reduce(function(h,g){var f=l(h);return a(l(f),g)?f[f.length]=g:h[h.length]=[g],h},[[n(b)]])},Y=function(h){for(var f=[],g=0,e=h.length;e>g;g++){h[g]&&f.push(h[g])}return f};return{head:n,last:l,initial:m,tail:W,prev:p,next:o,sum:Z,from:d,compact:Y,clusterBy:X}}(),S=function(){var Ah=function(g){return g&&R(g).hasClass("note-editable")},Ai=function(g){return g&&R(g).hasClass("note-control-sizing")},Ab=function(h){var g=function(i){return function(){return h.find(i)}};return{editor:function(){return h},dropzone:g(".note-dropzone"),toolbar:g(".note-toolbar"),editable:g(".note-editable"),codable:g(".note-codable"),statusbar:g(".note-statusbar"),popover:g(".note-popover"),handle:g(".note-handle"),dialog:g(".note-dialog")}},Ac=function(b){return function(g){return g&&g.nodeName===b}},f=function(b){return b&&/^DIV|^P|^LI|^H[1-7]/.test(b.nodeName)},Aa=function(b){return b&&/^UL|^OL/.test(b.nodeName)},Af=function(b){return b&&/^TD|^TH/.test(b.nodeName)},Ag=function(g,b){for(;g;){if(b(g)){return g}if(Ah(g)){break}g=g.parentNode}return null},Ad=function(i,g){g=g||U.fail;var h=[];return Ag(i,function(b){return h.push(b),g(b)}),h},Ae=function(i,j){for(var g=Ad(i),h=j;h;h=h.parentNode){if(R.inArray(h,g)>-1){return h}}return null},Y=function(k,i){var j=[],g=!1,h=!1;return function l(b){if(b){if(b===k&&(g=!0),g&&!h&&j.push(b),b===i){return void (h=!0)}for(var m=0,n=b.childNodes.length;n>m;m++){l(b.childNodes[m])}}}(Ae(k,i)),j},Z=function(i,g){g=g||U.fail;for(var h=[];i&&(h.push(i),!g(i));){i=i.previousSibling}return h},W=function(i,g){g=g||U.fail;for(var h=[];i&&(h.push(i),!g(i));){i=i.nextSibling}return h},X=function(j,h){var i=[];return h=h||U.ok,function g(k){j!==k&&h(k)&&i.push(k);for(var l=0,b=k.childNodes.length;b>l;l++){g(k.childNodes[l])}}(j),i},d=function(j,h){var i=h.nextSibling,g=h.parentNode;return i?g.insertBefore(j,i):g.appendChild(j),j},e=function(g,h){return R.each(h,function(i,b){g.appendChild(b)}),g},a=Ac("#text"),c=function(b){return a(b)?b.nodeValue.length:b.childNodes.length},Ao=function(h){for(var g=0;h=h.previousSibling;){g+=1}return g},Ap=function(g,h){var i=V.initial(Ad(h,U.eq(g)));return R.map(i,Ao).reverse()},An=function(k,i){for(var j=k,g=0,h=i.length;h>g;g++){j=j.childNodes[i[g]]}return j},Al=function(i,g){if(0===g){return i}if(g>=c(i)){return i.nextSibling}if(a(i)){return i.splitText(g)}var h=i.childNodes[g];return i=d(i.cloneNode(!1),i),e(i,W(h))},Aj=function(j,h,i){var g=Ad(h,U.eq(j));return 1===g.length?Al(h,i):g.reduce(function(l,b){var k=b.cloneNode(!1);return d(k,b),l===h&&(l=Al(l,i)),e(k,W(l)),k})},Ak=function(k,i){if(k&&k.parentNode){if(k.removeNode){return k.removeNode(i)}var j=k.parentNode;if(!i){var g,h,l=[];for(g=0,h=k.childNodes.length;h>g;g++){l.push(k.childNodes[g])}for(g=0,h=l.length;h>g;g++){j.insertBefore(l[g],k)}}j.removeChild(k)}},Am=function(b){return S.isTextarea(b[0])?b.val():b.html()};return{blank:Q.bMSIE?"&nbsp;":"<br/>",emptyPara:"<p><br/></p>",isEditable:Ah,isControlSizing:Ai,buildLayoutInfo:Ab,isText:a,isPara:f,isList:Aa,isTable:Ac("TABLE"),isCell:Af,isAnchor:Ac("A"),isDiv:Ac("DIV"),isLi:Ac("LI"),isSpan:Ac("SPAN"),isB:Ac("B"),isU:Ac("U"),isS:Ac("S"),isI:Ac("I"),isImg:Ac("IMG"),isTextarea:Ac("TEXTAREA"),ancestor:Ag,listAncestor:Ad,listNext:W,listPrev:Z,listDescendant:X,commonAncestor:Ae,listBetween:Y,insertAfter:d,position:Ao,makeOffsetPath:Ap,fromOffsetPath:An,split:Aj,remove:Ak,html:Am}}(),T={version:"0.5.2",options:{width:null,height:null,focus:!1,tabsize:4,styleWithSpan:!0,disableLinkTarget:!1,disableDragAndDrop:!1,codemirror:null,lang:"en-US",direction:null,toolbar:[["style",["style"]],["font",["bold","italic","underline","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["ul","ol","paragraph"]],["height",["height"]],["table",["table"]],["insert",["link","picture","video"]],["view",["fullscreen","codeview"]],["help",["help"]]],oninit:null,onfocus:null,onblur:null,onenter:null,onkeyup:null,onkeydown:null,onImageUpload:null,onImageUploadError:null,onToolbarClick:null,keyMap:{pc:{"CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft","CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull","CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+NUM0":"formatPara","CTRL+NUM1":"formatH1","CTRL+NUM2":"formatH2","CTRL+NUM3":"formatH3","CTRL+NUM4":"formatH4","CTRL+NUM5":"formatH5","CTRL+NUM6":"formatH6","CTRL+ENTER":"insertHorizontalRule"},mac:{"CMD+Z":"undo","CMD+SHIFT+Z":"redo",TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline","CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull","CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+NUM0":"formatPara","CMD+NUM1":"formatH1","CMD+NUM2":"formatH2","CMD+NUM3":"formatH3","CMD+NUM4":"formatH4","CMD+NUM5":"formatH5","CMD+NUM6":"formatH6","CMD+ENTER":"insertHorizontalRule"}}},lang:{"en-US":{font:{bold:"Bold",italic:"Italic",underline:"Underline",strike:"Strike",clear:"Remove Font Style",height:"Line Height",name:"Font Family",size:"Font Size"},image:{image:"Picture",insert:"Insert Image",resizeFull:"Resize Full",resizeHalf:"Resize Half",resizeQuarter:"Resize Quarter",floatLeft:"Float Left",floatRight:"Float Right",floatNone:"Float None",dragImageHere:"Drag an image here",selectFromFiles:"Select from files",url:"Image URL",remove:"Remove Image"},link:{link:"Link",insert:"Insert Link",unlink:"Unlink",edit:"Edit",textToDisplay:"Text to display",url:"To what URL should this link go?",openInNewWindow:"Open in new window"},video:{video:"Video",videoLink:"Video Link",insert:"Insert Video",url:"Video URL?",providers:"(YouTube, Vimeo, Vine, Instagram, or DailyMotion)"},table:{table:"Table"},hr:{insert:"Insert Horizontal Rule"},style:{style:"Style",normal:"Normal",blockquote:"Quote",pre:"Code",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6"},lists:{unordered:"Unordered list",ordered:"Ordered list"},options:{help:"Help",fullscreen:"Full Screen",codeview:"Code View"},paragraph:{paragraph:"Paragraph",outdent:"Outdent",indent:"Indent",left:"Align left",center:"Align center",right:"Align right",justify:"Justify full"},color:{recent:"Recent Color",more:"More Color",background:"BackColor",foreground:"FontColor",transparent:"Transparent",setTransparent:"Set transparent",reset:"Reset",resetToDefault:"Reset to default"},shortcut:{shortcuts:"Keyboard shortcuts",close:"Close",textFormatting:"Text formatting",action:"Action",paragraphFormatting:"Paragraph formatting",documentStyle:"Document Style"},history:{undo:"Undo",redo:"Redo"}}}},J=function(){var W=function(Y){return R.Deferred(function(Z){R.extend(new FileReader,{onload:function(d){var c=d.target.result;Z.resolve(c)},onerror:function(){Z.reject(this)}}).readAsDataURL(Y)}).promise()},X=function(Y){return R.Deferred(function(Z){R("<img>").one("load",function(){Z.resolve(R(this))}).one("error abort",function(){Z.reject(R(this))}).css({display:"none"}).appendTo(document.body).attr("src",Y)}).promise()};return{readFileAsDataURL:W,createImage:X}}(),K={isEdit:function(W){return -1!==[8,9,13,32].indexOf(W)},nameFromCode:{8:"BACKSPACE",9:"TAB",13:"ENTER",32:"SPACE",48:"NUM0",49:"NUM1",50:"NUM2",51:"NUM3",52:"NUM4",53:"NUM5",54:"NUM6",55:"NUM7",56:"NUM8",66:"B",69:"E",73:"I",74:"J",75:"K",76:"L",82:"R",83:"S",85:"U",89:"Y",90:"Z",191:"SLASH",219:"LEFTBRACKET",220:"BACKSLASH",221:"RIGHTBRACKET"}},H=function(){var W=function(Z,X){if(Q.jqueryVersion<1.9){var Y={};return R.each(X,function(d,b){Y[b]=Z.css(b)}),Y}return Z.css.call(Z,X)};this.stylePara=function(X,Y){R.each(X.nodes(S.isPara),function(a,Z){R(Z).css(Y)})},this.current=function(m,o){var X=R(S.isText(m.sc)?m.sc.parentNode:m.sc),n=["font-family","font-size","text-align","list-style-type","line-height"],a=W(X,n)||{};if(a["font-size"]=parseInt(a["font-size"],10),a["font-bold"]=document.queryCommandState("bold")?"bold":"normal",a["font-italic"]=document.queryCommandState("italic")?"italic":"normal",a["font-underline"]=document.queryCommandState("underline")?"underline":"normal",a["font-strikethrough"]=document.queryCommandState("strikeThrough")?"strikethrough":"normal",m.isOnList()){var b=["circle","disc","disc-leading-zero","square"],Y=R.inArray(a["list-style-type"],b)>-1;a["list-style"]=Y?"unordered":"ordered"}else{a["list-style"]="none"}var Z=S.ancestor(m.sc,S.isPara);if(Z&&Z.style["line-height"]){a["line-height"]=Z.style.lineHeight}else{var f=parseInt(a["line-height"],10)/parseInt(a["font-size"],10);a["line-height"]=f.toFixed(1)}return a.image=S.isImg(o)&&o,a.anchor=m.isOnAnchor()&&S.ancestor(m.sc,S.isAnchor),a.aAncestor=S.listAncestor(m.sc,S.isEditable),a}},I=function(){var Y=!!document.createRange,Z=function(t,r){var s,v,u=t.parentElement(),n=document.body.createTextRange(),o=V.from(u.childNodes);for(s=0;s<o.length;s++){if(!S.isText(o[s])){if(n.moveToElementText(o[s]),n.compareEndPoints("StartToStart",t)>=0){break}v=o[s]}}if(0!==s&&S.isText(o[s-1])){var e=document.body.createTextRange(),f=null;e.moveToElementText(v||u),e.collapse(!v),f=v?v.nextSibling:u.firstChild;var p=t.duplicate();p.setEndPoint("StartToStart",e);for(var q=p.text.replace(/[\r\n]/g,"").length;q>f.nodeValue.length&&f.nextSibling;){q-=f.nodeValue.length,f=f.nextSibling}f.nodeValue;r&&f.nextSibling&&S.isText(f.nextSibling)&&q===f.nodeValue.length&&(q-=f.nodeValue.length,f=f.nextSibling),u=f,s=q}return{cont:u,offset:s}},W=function(h){var e=function(n,m){var b,k;if(S.isText(n)){var l=S.listPrev(n,U.not(S.isText)),o=V.last(l).previousSibling;b=o||n.parentNode,m+=V.sum(V.tail(l),S.length),k=!o}else{if(b=n.childNodes[m]||n,S.isText(b)){return e(b,m)}m=0,k=!1}return{cont:b,collapseToStart:k,offset:m}},f=document.body.createTextRange(),d=e(h.cont,h.offset);return f.moveToElementText(d.cont),f.collapse(d.collapseToStart),f.moveStart("character",d.offset),f},X=function(e,a,b,f){this.sc=e,this.so=a,this.ec=b,this.eo=f;var g=function(){if(Y){var h=document.createRange();return h.setStart(e,a),h.setEnd(b,f),h}var c=W({cont:e,offset:a});return c.setEndPoint("EndToEnd",W({cont:b,offset:f})),c};this.select=function(){var i=g();if(Y){var h=document.getSelection();h.rangeCount>0&&h.removeAllRanges(),h.addRange(i)}else{i.select()}},this.nodes=function(j){var c=S.listBetween(e,b),i=V.compact(R.map(c,function(h){return S.ancestor(h,j)}));return R.map(V.clusterBy(i,U.eq2),V.head)},this.commonAncestor=function(){return S.commonAncestor(e,b)};var d=function(c){return function(){var h=S.ancestor(e,c);return !!h&&h===S.ancestor(b,c)}};this.isOnEditable=d(S.isEditable),this.isOnList=d(S.isList),this.isOnAnchor=d(S.isAnchor),this.isOnCell=d(S.isCell),this.isCollapsed=function(){return e===b&&a===f},this.insertNode=function(i){var h=g();Y?h.insertNode(i):h.pasteHTML(i.outerHTML)},this.toString=function(){var c=g();return Y?c.toString():c.text},this.bookmark=function(c){return{s:{path:S.makeOffsetPath(c,e),offset:a},e:{path:S.makeOffsetPath(c,b),offset:f}}}};return{create:function(s,v,b,t){if(0===arguments.length){if(Y){var u=document.getSelection();if(0===u.rangeCount){return null}var o=u.getRangeAt(0);s=o.startContainer,v=o.startOffset,b=o.endContainer,t=o.endOffset}else{var c=document.selection.createRange(),h=c.duplicate();h.collapse(!1);var q=c;q.collapse(!0);var r=Z(q,!0),p=Z(h,!1);s=r.cont,v=r.offset,b=p.cont,t=p.offset}}else{2===arguments.length&&(b=s,t=v)}return new X(s,v,b,t)},createFromNode:function(b){return this.create(b,0,b,1)},createFromBookmark:function(l,j){var k=S.fromOffsetPath(l,j.s.path),h=j.s.offset,i=S.fromOffsetPath(l,j.e.path),f=j.e.offset;return new X(k,h,i,f)}}}(),N=function(){this.tab=function(f,Z){var e=S.ancestor(f.commonAncestor(),S.isCell),X=S.ancestor(e,S.isTable),W=S.listDescendant(X,S.isCell),Y=V[Z?"prev":"next"](W,e);Y&&I.create(Y,0).select()},this.createTable=function(f,l){for(var n,W=[],m=0;f>m;m++){W.push("<td>"+S.blank+"</td>")}n=W.join("");for(var Z,a=[],X=0;l>X;X++){a.push("<tr>"+n+"</tr>")}Z=a.join("");var Y='<table class="table table-bordered">'+Z+"</table>";return R(Y)[0]}},O=function(){var f=new H,X=new N;this.saveRange=function(b){b.data("range",I.create())},this.restoreRange=function(e){var d=e.data("range");d&&d.select()},this.currentStyle=function(d){var b=I.create();return b.isOnEditable()&&f.current(b,d)},this.undo=function(b){b.data("NoteHistory").undo(b)},this.redo=function(b){b.data("NoteHistory").redo(b)};for(var Y=this.recordUndo=function(b){b.data("NoteHistory").recordUndo(b)},W=["bold","italic","underline","strikethrough","justifyLeft","justifyCenter","justifyRight","justifyFull","insertOrderedList","insertUnorderedList","indent","outdent","formatBlock","removeFormat","backColor","foreColor","insertHorizontalRule","fontName"],Z=0,c=W.length;c>Z;Z++){this[W[Z]]=function(b){return function(d,e){Y(d),document.execCommand(b,!1,e)}}(W[Z])}var a=function(k,l,i){Y(k);var e=new Array(i+1).join("&nbsp;");l.insertNode(R('<span id="noteTab">'+e+"</span>")[0]);var j=R("#noteTab").removeAttr("id");l=I.create(j[0],1),l.select(),S.remove(j[0])};this.tab=function(g,d){var e=I.create();e.isCollapsed()&&e.isOnCell()?X.tab(e):a(g,e,d.tabsize)},this.untab=function(){var b=I.create();b.isCollapsed()&&b.isOnCell()&&X.tab(b,!0)},this.insertImage=function(e,d){J.createImage(d).then(function(g){Y(e),g.css({display:"",width:Math.min(e.width(),g.width())}),I.create().insertNode(g[0])}).fail(function(){var g=e.data("callbacks");g.onImageUploadError&&g.onImageUploadError()})},this.insertVideo=function(y,z){Y(y);var Ac,Aa=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/,Ab=z.match(Aa),s=/\/\/instagram.com\/p\/(.[a-zA-Z0-9]*)/,t=z.match(s),r=/\/\/vine.co\/v\/(.[a-zA-Z0-9]*)/,w=z.match(r),x=/\/\/(player.)?vimeo.com\/([a-z]*\/)*([0-9]{6,11})[?]?.*/,u=z.match(x),v=/.+dailymotion.com\/(video|hub)\/([^_]+)[^#]*(#video=([^_&]+))?/,e=z.match(v);if(Ab&&11===Ab[2].length){var k=Ab[2];Ac=R("<iframe>").attr("src","//www.youtube.com/embed/"+k).attr("width","640").attr("height","360")}else{t&&t[0].length>0?Ac=R("<iframe>").attr("src",t[0]+"/embed/").attr("width","612").attr("height","710").attr("scrolling","no").attr("allowtransparency","true"):w&&w[0].length>0?Ac=R("<iframe>").attr("src",w[0]+"/embed/simple").attr("width","600").attr("height","600").attr("class","vine-embed"):u&&u[3].length>0?Ac=R("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("src","//player.vimeo.com/video/"+u[3]).attr("width","640").attr("height","360"):e&&e[2].length>0&&(Ac=R("<iframe>").attr("src","//www.dailymotion.com/embed/video/"+e[2]).attr("width","640").attr("height","360"))}Ac&&(Ac.attr("frameborder",0),I.create().insertNode(Ac[0]))},this.formatBlock=function(e,d){Y(e),d=Q.bMSIE?"<"+d+">":d,document.execCommand("FormatBlock",!1,d)},this.formatPara=function(b){this.formatBlock(b,"P")};for(var Z=1;6>=Z;Z++){this["formatH"+Z]=function(b){return function(d){this.formatBlock(d,"H"+b)}}(Z)}this.fontSize=function(e,d){Y(e),document.execCommand("fontSize",!1,3),Q.bFF?e.find("font[size=3]").removeAttr("size").css("font-size",d+"px"):e.find("span").filter(function(){return"medium"===this.style.fontSize}).css("font-size",d+"px")},this.lineHeight=function(d,b){Y(d),f.stylePara(I.create(),{lineHeight:b})},this.unlink=function(g){var d=I.create();if(d.isOnAnchor()){Y(g);var e=S.ancestor(d.sc,S.isAnchor);d=I.createFromNode(e),d.select(),document.execCommand("unlink")}},this.createLink=function(n,k,e){var l=I.create();Y(n);var m=k;if(-1!==k.indexOf("@")&&-1===k.indexOf(":")?m="mailto:"+k:-1===k.indexOf("://")&&(m="http://"+k),(Q.bMSIE||Q.bFF)&&l.isCollapsed()){l.insertNode(R('<A id="linkAnchor">'+k+"</A>")[0]);var o=R("#linkAnchor").attr("href",m).removeAttr("id");l=I.createFromNode(o[0]),l.select()}else{document.execCommand("createlink",!1,m),l=I.create()}R.each(l.nodes(S.isAnchor),function(d,g){e?R(g).attr("target","_blank"):R(g).removeAttr("target")})},this.getLinkInfo=function(){var i=I.create(),j=!0,g="";if(i.isOnAnchor()){var h=S.ancestor(i.sc,S.isAnchor);i=I.createFromNode(h),j="_blank"===R(h).attr("target"),g=h.href}return{text:i.toString(),url:g,newWindow:j}},this.getVideoInfo=function(){var e=I.create();if(e.isOnAnchor()){var d=S.ancestor(e.sc,S.isAnchor);e=I.createFromNode(d)}return{text:e.toString()}},this.color=function(i,g){var h=JSON.parse(g),e=h.foreColor,j=h.backColor;Y(i),e&&document.execCommand("foreColor",!1,e),j&&document.execCommand("backColor",!1,j)},this.insertTable=function(g,d){Y(g);var e=d.split("x");I.create().insertNode(X.createTable(e[0],e[1]))},this.floatMe=function(g,d,e){Y(g),e.css("float",d)},this.resize=function(g,d,e){Y(g),e.css({width:g.width()*d+"px",height:""})},this.resizeTo=function(k,i,j){var g;if(j){var h=k.y/k.x,l=i.data("ratio");g={width:l>h?k.x:k.y/l,height:l>h?k.x*l:k.y}}else{g={width:k.x,height:k.y}}i.css(g)},this.removeMedia=function(g,d,e){Y(g),e.detach()}},L=function(){var Z=[],X=[],Y=function(f){var d=f[0],e=I.create();return{contents:f.html(),bookmark:e.bookmark(d),scrollTop:f.scrollTop()}},W=function(d,c){d.html(c.contents).scrollTop(c.scrollTop),I.createFromBookmark(d[0],c.bookmark).select()};this.undo=function(a){var b=Y(a);0!==Z.length&&(W(a,Z.pop()),X.push(b))},this.redo=function(a){var b=Y(a);0!==X.length&&(W(a,X.pop()),Z.push(b))},this.recordUndo=function(a){X=[],Z.push(Y(a))}},M=function(){this.update=function(Z,a){var l=function(d,f){d.find(".dropdown-menu li a").each(function(){var c=R(this).data("value")+""==f+"";this.className=c?"checked":""})},e=function(g,f){var b=Z.find(g);b.toggleClass("active",f())},k=Z.find(".note-fontname");if(k.length>0){var X=a["font-family"];X&&(X=V.head(X.split(",")),X=X.replace(/\'/g,""),k.find(".note-current-fontname").text(X),l(k,X))}var Y=Z.find(".note-fontsize");Y.find(".note-current-fontsize").text(a["font-size"]),l(Y,parseFloat(a["font-size"]));var W=Z.find(".note-height");l(W,parseFloat(a["line-height"])),e('button[data-event="bold"]',function(){return"bold"===a["font-bold"]}),e('button[data-event="italic"]',function(){return"italic"===a["font-italic"]}),e('button[data-event="underline"]',function(){return"underline"===a["font-underline"]}),e('button[data-event="strikethrough"]',function(){return"strikethrough"===a["font-strikethrough"]}),e('button[data-event="justifyLeft"]',function(){return"left"===a["text-align"]||"start"===a["text-align"]}),e('button[data-event="justifyCenter"]',function(){return"center"===a["text-align"]}),e('button[data-event="justifyRight"]',function(){return"right"===a["text-align"]}),e('button[data-event="justifyFull"]',function(){return"justify"===a["text-align"]}),e('button[data-event="insertUnorderedList"]',function(){return"unordered"===a["list-style"]}),e('button[data-event="insertOrderedList"]',function(){return"ordered"===a["list-style"]})},this.updateRecentColor=function(a,i,X){var Y=R(a).closest(".note-color"),j=Y.find(".note-recent-color"),W=JSON.parse(j.attr("data-value"));W[i]=X,j.attr("data-value",JSON.stringify(W));var Z="backColor"===i?"background-color":"color";j.find("i").css(Z,X)},this.updateFullscreen=function(Y,W){var X=Y.find('button[data-event="fullscreen"]');X.toggleClass("active",W)},this.updateCodeview=function(Y,W){var X=Y.find('button[data-event="codeview"]');X.toggleClass("active",W)},this.activate=function(W){W.find("button").not('button[data-event="codeview"]').removeClass("disabled")},this.deactivate=function(W){W.find("button").not('button[data-event="codeview"]').addClass("disabled")}},C=function(){var W=function(Z,a){var X=R(a),Y=X.position(),g=X.height();Z.css({display:"block",left:Y.left,top:Y.top+g})};this.update=function(b,Z){var X=b.find(".note-link-popover");if(Z.anchor){var Y=X.find("a");Y.attr("href",Z.anchor.href).html(Z.anchor.href),W(X,Z.anchor)}else{X.hide()}var g=b.find(".note-image-popover");Z.image?W(g,Z.image):g.hide()},this.hide=function(X){X.children().hide()}},D=function(){this.update=function(a,i){var X=a.find(".note-control-selection");if(i.image){var Y=R(i.image),j=Y.position(),W={w:Y.width(),h:Y.height()};X.css({display:"block",left:j.left,top:j.top,width:W.w,height:W.h}).data("target",i.image);var Z=W.w+"x"+W.h;X.find(".note-control-selection-info").text(Z)}else{X.hide()}},this.hide=function(W){W.children().hide()}},A=function(){var W=function(Y,X){Y.toggleClass("disabled",!X),Y.attr("disabled",!X)};this.showImageDialog=function(Y,X){return R.Deferred(function(d){var c=X.find(".note-image-dialog"),i=X.find(".note-image-input"),Z=X.find(".note-image-url"),b=X.find(".note-image-btn");c.one("shown.bs.modal",function(){i.replaceWith(i.clone().on("change",function(){c.modal("hide"),d.resolve(this.files)})),b.click(function(a){a.preventDefault(),c.modal("hide"),d.resolve(Z.val())}),Z.keyup(function(){W(b,Z.val())}).val("").focus()}).one("hidden.bs.modal",function(){Y.focus(),i.off("change"),Z.off("keyup"),b.off("click")}).modal("show")})},this.showVideoDialog=function(Z,X,Y){return R.Deferred(function(d){var e=X.find(".note-video-dialog"),b=e.find(".note-video-url"),c=e.find(".note-video-btn");e.one("shown.bs.modal",function(){b.val(Y.text).keyup(function(){W(c,b.val())}).trigger("keyup").trigger("focus"),c.click(function(a){a.preventDefault(),e.modal("hide"),d.resolve(b.val())})}).one("hidden.bs.modal",function(){Z.focus(),b.off("keyup"),c.off("click")}).modal("show")})},this.showLinkDialog=function(Z,X,Y){return R.Deferred(function(k){var l=X.find(".note-link-dialog"),b=l.find(".note-link-text"),c=l.find(".note-link-url"),d=l.find(".note-link-btn"),e=l.find("input[type=checkbox]");l.one("shown.bs.modal",function(){b.val(Y.text),c.keyup(function(){W(d,c.val()),Y.text||b.val(c.val())}).val(Y.url).trigger("focus"),e.prop("checked",Y.newWindow),d.one("click",function(a){a.preventDefault(),l.modal("hide"),k.resolve(c.val(),e.is(":checked"))})}).one("hidden.bs.modal",function(){Z.focus(),c.off("keyup")}).modal("show")}).promise()},this.showHelpDialog=function(Z,X){var Y=X.find(".note-help-dialog");Y.one("hidden.bs.modal",function(){Z.focus()}).modal("show")}},B=function(){var h=new O,f=new M,b=new C,c=new D,e=new A,W=function(d){var g=R(d).closest(".note-editor");return g.length>0&&S.buildLayoutInfo(g)},Z=function(g,j){h.restoreRange(g);var d=g.data("callbacks");d.onImageUpload?d.onImageUpload(j,h,g):R.each(j,function(l,k){J.readFileAsDataURL(k).then(function(s){h.insertImage(g,s)}).fail(function(){d.onImageUploadError&&d.onImageUploadError()})})},a=function(d){S.isImg(d.target)&&d.preventDefault()},X=function(j){var d=W(j.currentTarget||j.target),g=h.currentStyle(j.target);g&&(f.update(d.toolbar(),g),b.update(d.popover(),g),c.update(d.handle(),g))},Y=function(g){var d=W(g.currentTarget||g.target);b.hide(d.popover()),c.hide(d.handle())},Aa=function(l){var j=l.originalEvent;if(j.clipboardData&&j.clipboardData.items&&j.clipboardData.items.length){var k=W(l.currentTarget||l.target),g=V.head(j.clipboardData.items),s="file"===g.kind&&-1!==g.type.indexOf("image/");s&&Z(k.editable(),[g.getAsFile()])}},Ab=function(w){if(S.isControlSizing(w.target)){var x=W(w.target),d=x.handle(),y=x.popover(),j=x.editable(),k=x.editor(),u=d.find(".note-control-selection").data("target"),v=R(u),s=v.offset(),t=R(document).scrollTop();k.on("mousemove",function(g){h.resizeTo({x:g.clientX-s.left,y:g.clientY-(s.top-t)},v,!g.shiftKey),c.update(d,{image:u}),b.update(y,{image:u})}).one("mouseup",function(){k.off("mousemove")}),v.data("ratio")||v.data("ratio",v.height()/v.width()),h.recordUndo(j),w.stopPropagation(),w.preventDefault()}},r=function(d){var g=R(d.target).closest("[data-event]");g.length>0&&d.preventDefault()},n=function(Ai){var Ad=R(Ai.target).closest("[data-event]");if(Ad.length>0){var Ae,v,Ac,Ah=Ad.attr("data-event"),Af=Ad.attr("data-value"),Ag=W(Ai.target),g=Ag.editor(),l=Ag.toolbar(),d=Ag.dialog(),t=Ag.editable(),s=Ag.codable(),Ar=g.data("options");if(-1!==R.inArray(Ah,["resize","floatMe","removeMedia"])){var As=Ag.handle(),Aq=As.find(".note-control-selection");Ac=R(Aq.data("target"))}if(h[Ah]&&(t.trigger("focus"),h[Ah](t,Af,Ac)),-1!==R.inArray(Ah,["backColor","foreColor"])){f.updateRecentColor(Ad[0],Ah,Af)}else{if("showLinkDialog"===Ah){t.focus();var Al=h.getLinkInfo();h.saveRange(t),e.showLinkDialog(t,d,Al).then(function(k,j){h.restoreRange(t),h.createLink(t,k,j)})}else{if("showImageDialog"===Ah){t.focus(),e.showImageDialog(t,d).then(function(j){"string"==typeof j?(h.restoreRange(t),h.insertImage(t,j)):Z(t,j)})}else{if("showVideoDialog"===Ah){t.focus();var Aj=h.getVideoInfo();h.saveRange(t),e.showVideoDialog(t,d,Aj).then(function(j){h.restoreRange(t),h.insertVideo(t,j)})}else{if("showHelpDialog"===Ah){e.showHelpDialog(t,d)}else{if("fullscreen"===Ah){var Ak=R("html, body"),Ao=function(j){g.css("width",j.w),t.css("height",j.h),s.css("height",j.h),s.data("cmEditor")&&s.data("cmEditor").setSize(null,j.h)};g.toggleClass("fullscreen");var Ap=g.hasClass("fullscreen");Ap?(t.data("orgHeight",t.css("height")),R(window).on("resize",function(){Ao({w:R(window).width(),h:R(window).height()-l.outerHeight()})}).trigger("resize"),Ak.css("overflow","hidden")):(R(window).off("resize"),Ao({w:Ar.width||"",h:t.data("orgHeight")}),Ak.css("overflow","auto")),f.updateFullscreen(l,Ap)}else{if("codeview"===Ah){g.toggleClass("codeview");var Am=g.hasClass("codeview");if(Am){if(s.val(t.html()),s.height(t.height()),f.deactivate(l),s.focus(),Q.bCodeMirror){v=P.fromTextArea(s[0],R.extend({mode:"text/html",lineNumbers:!0},Ar.codemirror));var An=g.data("options").codemirror.tern||!1;An&&(Ae=new P.TernServer(An),v.ternServer=Ae,v.on("cursorActivity",function(j){Ae.updateArgHints(j)})),v.setSize(null,t.outerHeight()),v.autoFormatRange&&v.autoFormatRange({line:0,ch:0},{line:v.lineCount(),ch:v.getTextArea().value.length}),s.data("cmEditor",v)}}else{Q.bCodeMirror&&(v=s.data("cmEditor"),s.val(v.getValue()),v.toTextArea()),t.html(s.val()||S.emptyPara),t.height(Ar.height?s.height():"auto"),f.activate(l),t.focus()}f.updateCodeview(Ag.toolbar(),Am)}}}}}}}X(Ai)}},i=24,m=function(k){var l=R(document),g=W(k.target).editable(),j=g.offset().top-l.scrollTop();l.on("mousemove",function(s){var d=s.clientY-(j+i);g.height(d)}).one("mouseup",function(){l.off("mousemove")}),k.stopPropagation(),k.preventDefault()},p=18,q=function(u){var v,y=R(u.target.parentNode),k=y.next(),w=y.find(".note-dimension-picker-mousecatcher"),x=y.find(".note-dimension-picker-highlighted"),s=y.find(".note-dimension-picker-unhighlighted");if(void 0===u.offsetX){var t=R(u.target).offset();v={x:u.pageX-t.left,y:u.pageY-t.top}}else{v={x:u.offsetX,y:u.offsetY}}var l={c:Math.ceil(v.x/p)||1,r:Math.ceil(v.y/p)||1};x.css({width:l.c+"em",height:l.r+"em"}),w.attr("data-value",l.c+"x"+l.r),3<l.c&&l.c<10&&s.css({width:l.c+1+"em"}),3<l.r&&l.r<10&&s.css({height:l.r+1+"em"}),k.html(l.c+" x "+l.r)},o=function(k){var l=R(),g=k.dropzone,j=k.dropzone.find(".note-dropzone-message");R(document).on("dragenter",function(d){var s=k.editor.hasClass("codeview");s||0!==l.length||(k.editor.addClass("dragover"),g.width(k.editor.width()),g.height(k.editor.height()),j.text("Drag Image Here")),l=l.add(d.target)}).on("dragleave",function(d){l=l.not(d.target),0===l.length&&k.editor.removeClass("dragover")}).on("drop",function(){l=R(),k.editor.removeClass("dragover")}),g.on("dragenter",function(){g.addClass("hover"),j.text("Drop Image")}).on("dragleave",function(){g.removeClass("hover"),j.text("Drag Image Here")}),g.on("drop",function(t){var d=t.originalEvent.dataTransfer;if(d&&d.files){var s=W(t.currentTarget||t.target);s.editable().focus(),Z(s.editable(),d.files)}t.preventDefault()}).on("dragover",!1)};this.bindKeyMap=function(k,g){var j=k.editor,d=k.editable;d.on("keydown",function(t){var u=[];t.metaKey&&u.push("CMD"),t.ctrlKey&&u.push("CTRL"),t.shiftKey&&u.push("SHIFT");var l=K.nameFromCode[t.keyCode];l&&u.push(l);var s=g[u.join("+")];s?(t.preventDefault(),h[s](d,j.data("options"))):K.isEdit(t.keyCode)&&h.recordUndo(d)})},this.attach=function(l,k){this.bindKeyMap(l,k.keyMap[Q.bMac?"mac":"pc"]),l.editable.on("mousedown",a),l.editable.on("keyup mouseup",X),l.editable.on("scroll",Y),l.editable.on("paste",Aa),k.disableDragAndDrop||o(l),l.handle.on("mousedown",Ab),l.toolbar.on("click",n),l.popover.on("click",n),l.toolbar.on("mousedown",r),l.popover.on("mousedown",r),l.statusbar.on("mousedown",m);var j=l.toolbar,s=j.find(".note-dimension-picker-mousecatcher");if(s.on("mousemove",q),l.editable.on("blur",function(){h.saveRange(l.editable)}),l.editor.data("options",k),k.styleWithSpan&&!Q.bMSIE&&setTimeout(function(){document.execCommand("styleWithCSS",0,!0)}),l.editable.data("NoteHistory",new L),k.onenter&&l.editable.keypress(function(g){g.keyCode===K.ENTER&&k.onenter(g)}),k.onfocus&&l.editable.focus(k.onfocus),k.onblur&&l.editable.blur(k.onblur),k.onkeyup&&l.editable.keyup(k.onkeyup),k.onkeydown&&l.editable.keydown(k.onkeydown),k.onpaste&&l.editable.on("paste",k.onpaste),k.onToolbarClick&&l.toolbar.click(k.onToolbarClick),k.onChange){var d=function(){k.onChange(l.editable,l.editable.html())};Q.bMSIE?l.editable.on("DOMCharacterDataModified, DOMSubtreeModified, DOMNodeInserted",d):l.editable.on("input",d)}l.editable.data("callbacks",{onAutoSave:k.onAutoSave,onImageUpload:k.onImageUpload,onImageUploadError:k.onImageUploadError,onFileUpload:k.onFileUpload,onFileUploadError:k.onFileUpload})},this.dettach=function(d){d.editable.off(),d.toolbar.off(),d.handle.off(),d.popover.off()}},F=function(){var x,z,W,y,f;x={picture:function(b){return'<button type="button" class="btn btn-default btn-sm btn-small" title="'+b.image.image+'" data-event="showImageDialog" tabindex="-1"><i class="fa fa-picture-o icon-picture"></i></button>'},link:function(b){return'<button type="button" class="btn btn-default btn-sm btn-small" title="'+b.link.link+'" data-event="showLinkDialog" tabindex="-1"><i class="fa fa-link icon-link"></i></button>'},video:function(b){return'<button type="button" class="btn btn-default btn-sm btn-small" title="'+b.video.video+'" data-event="showVideoDialog" tabindex="-1"><i class="fa fa-youtube-play icon-play"></i></button>'},table:function(b){return'<button type="button" class="btn btn-default btn-sm btn-small dropdown-toggle" title="'+b.table.table+'" data-toggle="dropdown" tabindex="-1"><i class="fa fa-table icon-table"></i> <span class="caret"></span></button><ul class="dropdown-menu"><div class="note-dimension-picker"><div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"></div><div class="note-dimension-picker-highlighted"></div><div class="note-dimension-picker-unhighlighted"></div></div><div class="note-dimension-display"> 1 x 1 </div></ul>'},style:function(b){return'<button type="button" class="btn btn-default btn-sm btn-small dropdown-toggle" title="'+b.style.style+'" data-toggle="dropdown" tabindex="-1"><i class="fa fa-magic icon-magic"></i> <span class="caret"></span></button><ul class="dropdown-menu"><li><a data-event="formatBlock" data-value="p">'+b.style.normal+'</a></li><li><a data-event="formatBlock" data-value="blockquote"><blockquote>'+b.style.blockquote+'</blockquote></a></li><li><a data-event="formatBlock" data-value="pre">'+b.style.pre+'</a></li><li><a data-event="formatBlock" data-value="h1"><h1>'+b.style.h1+'</h1></a></li><li><a data-event="formatBlock" data-value="h2"><h2>'+b.style.h2+'</h2></a></li><li><a data-event="formatBlock" data-value="h3"><h3>'+b.style.h3+'</h3></a></li><li><a data-event="formatBlock" data-value="h4"><h4>'+b.style.h4+'</h4></a></li><li><a data-event="formatBlock" data-value="h5"><h5>'+b.style.h5+'</h5></a></li><li><a data-event="formatBlock" data-value="h6"><h6>'+b.style.h6+"</h6></a></li></ul>"},fontname:function(i){var g=["Serif","Sans","Arial","Arial Black","Courier","Courier New","Comic Sans MS","Helvetica","Impact","Lucida Grande","Lucida Sans","Tahoma","Times","Times New Roman","Verdana"],h='<button type="button" class="btn btn-default btn-sm btn-small dropdown-toggle" data-toggle="dropdown" title="'+i.font.name+'" tabindex="-1"><span class="note-current-fontname">Arial</span> <b class="caret"></b></button>';h+='<ul class="dropdown-menu">';for(var e=0;e<g.length;e++){h+='<li><a data-event="fontName" data-value="'+g[e]+'"><i class="fa fa-check icon-ok"></i> '+g[e]+"</a></li>"}return h+="</ul>"},fontsize:function(b){return'<button type="button" class="btn btn-default btn-sm btn-small dropdown-toggle" data-toggle="dropdown" title="'+b.font.size+'" tabindex="-1"><span class="note-current-fontsize">11</span> <b class="caret"></b></button><ul class="dropdown-menu"><li><a data-event="fontSize" data-value="8"><i class="fa fa-check icon-ok"></i> 8</a></li><li><a data-event="fontSize" data-value="9"><i class="fa fa-check icon-ok"></i> 9</a></li><li><a data-event="fontSize" data-value="10"><i class="fa fa-check icon-ok"></i> 10</a></li><li><a data-event="fontSize" data-value="11"><i class="fa fa-check icon-ok"></i> 11</a></li><li><a data-event="fontSize" data-value="12"><i class="fa fa-check icon-ok"></i> 12</a></li><li><a data-event="fontSize" data-value="14"><i class="fa fa-check icon-ok"></i> 14</a></li><li><a data-event="fontSize" data-value="18"><i class="fa fa-check icon-ok"></i> 18</a></li><li><a data-event="fontSize" data-value="24"><i class="fa fa-check icon-ok"></i> 24</a></li><li><a data-event="fontSize" data-value="36"><i class="fa fa-check icon-ok"></i> 36</a></li></ul>'},color:function(b){return'<button type="button" class="btn btn-default btn-sm btn-small note-recent-color" title="'+b.color.recent+'" data-event="color" data-value=\'{"backColor":"yellow"}\' tabindex="-1"><i class="fa fa-font icon-font" style="color:black;background-color:yellow;"></i></button><button type="button" class="btn btn-default btn-sm btn-small dropdown-toggle" title="'+b.color.more+'" data-toggle="dropdown" tabindex="-1"><span class="caret"></span></button><ul class="dropdown-menu"><li><div class="btn-group"><div class="note-palette-title">'+b.color.background+'</div><div class="note-color-reset" data-event="backColor" data-value="inherit" title="'+b.color.transparent+'">'+b.color.setTransparent+'</div><div class="note-color-palette" data-target-event="backColor"></div></div><div class="btn-group"><div class="note-palette-title">'+b.color.foreground+'</div><div class="note-color-reset" data-event="foreColor" data-value="inherit" title="'+b.color.reset+'">'+b.color.resetToDefault+'</div><div class="note-color-palette" data-target-event="foreColor"></div></div></li></ul>'},bold:function(b){return'<button type="button" class="btn btn-default btn-sm btn-small" title="'+b.font.bold+'" data-shortcut="Ctrl+B" data-mac-shortcut="⌘+B" data-event="bold" tabindex="-1"><i class="fa fa-bold icon-bold"></i></button>'},italic:function(b){return'<button type="button" class="btn btn-default btn-sm btn-small" title="'+b.font.italic+'" data-shortcut="Ctrl+I" data-mac-shortcut="⌘+I" data-event="italic" tabindex="-1"><i class="fa fa-italic icon-italic"></i></button>'},underline:function(b){return'<button type="button" class="btn btn-default btn-sm btn-small" title="'+b.font.underline+'" data-shortcut="Ctrl+U" data-mac-shortcut="⌘+U" data-event="underline" tabindex="-1"><i class="fa fa-underline icon-underline"></i></button>'},strike:function(b){return'<button type="button" class="btn btn-default btn-sm btn-small" title="'+b.font.strike+'" data-event="strikethrough" tabindex="-1"><i class="fa fa-strikethrough icon-strikethrough"></i></button>'},clear:function(b){return'<button type="button" class="btn btn-default btn-sm btn-small" title="'+b.font.clear+'" data-shortcut="Ctrl+\\" data-mac-shortcut="⌘+\\" data-event="removeFormat" tabindex="-1"><i class="fa fa-eraser icon-eraser"></i></button>'},ul:function(b){return'<button type="button" class="btn btn-default btn-sm btn-small" title="'+b.lists.unordered+'" data-shortcut="Ctrl+Shift+8" data-mac-shortcut="⌘+⇧+7" data-event="insertUnorderedList" tabindex="-1"><i class="fa fa-list-ul icon-list-ul"></i></button>'},ol:function(b){return'<button type="button" class="btn btn-default btn-sm btn-small" title="'+b.lists.ordered+'" data-shortcut="Ctrl+Shift+7" data-mac-shortcut="⌘+⇧+8" data-event="insertOrderedList" tabindex="-1"><i class="fa fa-list-ol icon-list-ol"></i></button>'},paragraph:function(b){return'<button type="button" class="btn btn-default btn-sm btn-small dropdown-toggle" title="'+b.paragraph.paragraph+'" data-toggle="dropdown" tabindex="-1"><i class="fa fa-align-left icon-align-left"></i>  <span class="caret"></span></button><div class="dropdown-menu"><div class="note-align btn-group"><button type="button" class="btn btn-default btn-sm btn-small" title="'+b.paragraph.left+'" data-shortcut="Ctrl+Shift+L" data-mac-shortcut="⌘+⇧+L" data-event="justifyLeft" tabindex="-1"><i class="fa fa-align-left icon-align-left"></i></button><button type="button" class="btn btn-default btn-sm btn-small" title="'+b.paragraph.center+'" data-shortcut="Ctrl+Shift+E" data-mac-shortcut="⌘+⇧+E" data-event="justifyCenter" tabindex="-1"><i class="fa fa-align-center icon-align-center"></i></button><button type="button" class="btn btn-default btn-sm btn-small" title="'+b.paragraph.right+'" data-shortcut="Ctrl+Shift+R" data-mac-shortcut="⌘+⇧+R" data-event="justifyRight" tabindex="-1"><i class="fa fa-align-right icon-align-right"></i></button><button type="button" class="btn btn-default btn-sm btn-small" title="'+b.paragraph.justify+'" data-shortcut="Ctrl+Shift+J" data-mac-shortcut="⌘+⇧+J" data-event="justifyFull" tabindex="-1"><i class="fa fa-align-justify icon-align-justify"></i></button></div><div class="note-list btn-group"><button type="button" class="btn btn-default btn-sm btn-small" title="'+b.paragraph.outdent+'" data-shortcut="Ctrl+[" data-mac-shortcut="⌘+[" data-event="outdent" tabindex="-1"><i class="fa fa-outdent icon-indent-left"></i></button><button type="button" class="btn btn-default btn-sm btn-small" title="'+b.paragraph.indent+'" data-shortcut="Ctrl+]" data-mac-shortcut="⌘+]" data-event="indent" tabindex="-1"><i class="fa fa-indent icon-indent-right"></i></button></div></div>'},height:function(b){return'<button type="button" class="btn btn-default btn-sm btn-small dropdown-toggle" data-toggle="dropdown" title="'+b.font.height+'" tabindex="-1"><i class="fa fa-text-height icon-text-height"></i>&nbsp; <b class="caret"></b></button><ul class="dropdown-menu"><li><a data-event="lineHeight" data-value="1.0"><i class="fa fa-check icon-ok"></i> 1.0</a></li><li><a data-event="lineHeight" data-value="1.2"><i class="fa fa-check icon-ok"></i> 1.2</a></li><li><a data-event="lineHeight" data-value="1.4"><i class="fa fa-check icon-ok"></i> 1.4</a></li><li><a data-event="lineHeight" data-value="1.5"><i class="fa fa-check icon-ok"></i> 1.5</a></li><li><a data-event="lineHeight" data-value="1.6"><i class="fa fa-check icon-ok"></i> 1.6</a></li><li><a data-event="lineHeight" data-value="1.8"><i class="fa fa-check icon-ok"></i> 1.8</a></li><li><a data-event="lineHeight" data-value="2.0"><i class="fa fa-check icon-ok"></i> 2.0</a></li><li><a data-event="lineHeight" data-value="3.0"><i class="fa fa-check icon-ok"></i> 3.0</a></li></ul>'},help:function(b){return'<button type="button" class="btn btn-default btn-sm btn-small" title="'+b.options.help+'" data-event="showHelpDialog" tabindex="-1"><i class="fa fa-question icon-question"></i></button>'},fullscreen:function(b){return'<button type="button" class="btn btn-default btn-sm btn-small" title="'+b.options.fullscreen+'" data-event="fullscreen" tabindex="-1"><i class="fa fa-arrows-alt icon-fullscreen"></i></button>'},codeview:function(b){return'<button type="button" class="btn btn-default btn-sm btn-small" title="'+b.options.codeview+'" data-event="codeview" tabindex="-1"><i class="fa fa-code icon-code"></i></button>'},undo:function(b){return'<button type="button" class="btn btn-default btn-sm btn-small" title="'+b.history.undo+'" data-event="undo" tabindex="-1"><i class="fa fa-undo icon-undo"></i></button>'},redo:function(b){return'<button type="button" class="btn btn-default btn-sm btn-small" title="'+b.history.redo+'" data-event="redo" tabindex="-1"><i class="fa fa-repeat icon-repeat"></i></button>'}},z=function(b){return'<div class="note-popover"><div class="note-link-popover popover bottom in" style="display: none;"><div class="arrow"></div><div class="popover-content note-link-content"><a href="http://www.google.com" target="_blank">www.google.com</a>&nbsp;&nbsp;<div class="note-insert btn-group"><button type="button" class="btn btn-default btn-sm btn-small" title="'+b.link.edit+'" data-event="showLinkDialog" tabindex="-1"><i class="fa fa-edit icon-edit"></i></button><button type="button" class="btn btn-default btn-sm btn-small" title="'+b.link.unlink+'" data-event="unlink" tabindex="-1"><i class="fa fa-unlink icon-unlink"></i></button></div></div></div><div class="note-image-popover popover bottom in" style="display: none;"><div class="arrow"></div><div class="popover-content note-image-content"><div class="btn-group"><button type="button" class="btn btn-default btn-sm btn-small" title="'+b.image.resizeFull+'" data-event="resize" data-value="1" tabindex="-1"><span class="note-fontsize-10">100%</span> </button><button type="button" class="btn btn-default btn-sm btn-small" title="'+b.image.resizeHalf+'" data-event="resize" data-value="0.5" tabindex="-1"><span class="note-fontsize-10">50%</span> </button><button type="button" class="btn btn-default btn-sm btn-small" title="'+b.image.resizeQuarter+'" data-event="resize" data-value="0.25" tabindex="-1"><span class="note-fontsize-10">25%</span> </button></div><div class="btn-group"><button type="button" class="btn btn-default btn-sm btn-small" title="'+b.image.floatLeft+'" data-event="floatMe" data-value="left" tabindex="-1"><i class="fa fa-align-left icon-align-left"></i></button><button type="button" class="btn btn-default btn-sm btn-small" title="'+b.image.floatRight+'" data-event="floatMe" data-value="right" tabindex="-1"><i class="fa fa-align-right icon-align-right"></i></button><button type="button" class="btn btn-default btn-sm btn-small" title="'+b.image.floatNone+'" data-event="floatMe" data-value="none" tabindex="-1"><i class="fa fa-align-justify icon-align-justify"></i></button></div><div class="btn-group"><button type="button" class="btn btn-default btn-sm btn-small" title="'+b.image.remove+'" data-event="removeMedia" data-value="none" tabindex="-1"><i class="fa fa-trash-o icon-trash"></i></button></div></div></div></div>'};var W=function(){return'<div class="note-handle"><div class="note-control-selection"><div class="note-control-selection-bg"></div><div class="note-control-holder note-control-nw"></div><div class="note-control-holder note-control-ne"></div><div class="note-control-holder note-control-sw"></div><div class="note-control-sizing note-control-se"></div><div class="note-control-selection-info"></div></div></div>'},s=function(b){return'<table class="note-shortcut"><thead><tr><th></th><th>'+b.shortcut.textFormatting+"</th></tr></thead><tbody><tr><td>⌘ + B</td><td>"+b.font.bold+"</td></tr><tr><td>⌘ + I</td><td>"+b.font.italic+"</td></tr><tr><td>⌘ + U</td><td>"+b.font.underline+"</td></tr><tr><td>⌘ + ⇧ + S</td><td>"+b.font.strike+"</td></tr><tr><td>⌘ + \\</td><td>"+b.font.clear+"</td></tr></tr></tbody></table>"},a=function(b){return'<table class="note-shortcut"><thead><tr><th></th><th>'+b.shortcut.action+"</th></tr></thead><tbody><tr><td>⌘ + Z</td><td>"+b.history.undo+"</td></tr><tr><td>⌘ + ⇧ + Z</td><td>"+b.history.redo+"</td></tr><tr><td>⌘ + ]</td><td>"+b.paragraph.indent+"</td></tr><tr><td>⌘ + [</td><td>"+b.paragraph.outdent+"</td></tr><tr><td>⌘ + ENTER</td><td>"+b.hr.insert+"</td></tr></tbody></table>"},c=function(i,g){var h='<table class="note-shortcut"><thead><tr><th></th><th>'+i.shortcut.extraKeys+"</th></tr></thead><tbody>";for(var e in g.extraKeys){g.extraKeys.hasOwnProperty(e)&&(h+="<tr><td>"+e+"</td><td>"+g.extraKeys[e]+"</td></tr>")}return h+="</tbody></table>"},v=function(b){return'<table class="note-shortcut"><thead><tr><th></th><th>'+b.shortcut.paragraphFormatting+"</th></tr></thead><tbody><tr><td>⌘ + ⇧ + L</td><td>"+b.paragraph.left+"</td></tr><tr><td>⌘ + ⇧ + E</td><td>"+b.paragraph.center+"</td></tr><tr><td>⌘ + ⇧ + R</td><td>"+b.paragraph.right+"</td></tr><tr><td>⌘ + ⇧ + J</td><td>"+b.paragraph.justify+"</td></tr><tr><td>⌘ + ⇧ + NUM7</td><td>"+b.lists.ordered+"</td></tr><tr><td>⌘ + ⇧ + NUM8</td><td>"+b.lists.unordered+"</td></tr></tbody></table>"},w=function(b){return'<table class="note-shortcut"><thead><tr><th></th><th>'+b.shortcut.documentStyle+"</th></tr></thead><tbody><tr><td>⌘ + NUM0</td><td>"+b.style.normal+"</td></tr><tr><td>⌘ + NUM1</td><td>"+b.style.h1+"</td></tr><tr><td>⌘ + NUM2</td><td>"+b.style.h2+"</td></tr><tr><td>⌘ + NUM3</td><td>"+b.style.h3+"</td></tr><tr><td>⌘ + NUM4</td><td>"+b.style.h4+"</td></tr><tr><td>⌘ + NUM5</td><td>"+b.style.h5+"</td></tr><tr><td>⌘ + NUM6</td><td>"+b.style.h6+"</td></tr></tbody></table>"},t=function(g,d){var e='<table class="note-shortcut-layout"><tbody><tr><td>'+a(g,d)+"</td><td>"+s(g,d)+"</td></tr><tr><td>"+w(g,d)+"</td><td>"+v(g,d)+"</td></tr>";return d.extraKeys&&(e+='<tr><td colspan="2">'+c(g,d)+"</td></tr>"),e+="</tbody</table>"},u=function(b){return b.replace(/⌘/g,"Ctrl").replace(/⇧/g,"Shift")};y=function(l,k){var i=function(){return'<div class="note-image-dialog modal" aria-hidden="false"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" aria-hidden="true" tabindex="-1">&times;</button><h4>'+l.image.insert+'</h4></div><div class="modal-body"><div class="row-fluid"><h5>'+l.image.selectFromFiles+'</h5><input class="note-image-input" type="file" name="files" accept="image/*" /><h5>'+l.image.url+'</h5><input class="note-image-url form-control span12" type="text" /></div></div><div class="modal-footer"><button href="#" class="btn btn-primary note-image-btn disabled" disabled="disabled">'+l.image.insert+"</button></div></div></div></div>"},j=function(){return'<div class="note-link-dialog modal" aria-hidden="false"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" aria-hidden="true" tabindex="-1">&times;</button><h4>'+l.link.insert+'</h4></div><div class="modal-body"><div class="row-fluid"><div class="form-group"><label>'+l.link.textToDisplay+'</label><input class="note-link-text form-control span12" disabled type="text" /></div><div class="form-group"><label>'+l.link.url+'</label><input class="note-link-url form-control span12" type="text" /></div>'+(k.disableLinkTarget?"":'<div class="checkbox"><label><input type="checkbox" checked> '+l.link.openInNewWindow+"</label></div>")+'</div></div><div class="modal-footer"><button href="#" class="btn btn-primary note-link-btn disabled" disabled="disabled">'+l.link.insert+"</button></div></div></div></div>"},m=function(){return'<div class="note-video-dialog modal" aria-hidden="false"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" aria-hidden="true" tabindex="-1">&times;</button><h4>'+l.video.insert+'</h4></div><div class="modal-body"><div class="row-fluid"><div class="form-group"><label>'+l.video.url+'</label>&nbsp;<small class="text-muted">'+l.video.providers+'</small><input class="note-video-url form-control span12" type="text" /></div></div></div><div class="modal-footer"><button href="#" class="btn btn-primary note-video-btn disabled" disabled="disabled">'+l.video.insert+"</button></div></div></div></div>"},h=function(){return'<div class="note-help-dialog modal" aria-hidden="false"><div class="modal-dialog"><div class="modal-content"><div class="modal-body"><a class="modal-close pull-right" aria-hidden="true" tabindex="-1">'+l.shortcut.close+'</a><div class="title">'+l.shortcut.shortcuts+"</div>"+(Q.bMac?t(l,k):u(t(l,k)))+'<p class="text-center"><a href="//hackerwins.github.io/summernote/" target="_blank">Summernote 0.5.2</a> · <a href="//github.com/HackerWins/summernote" target="_blank">Project</a> · <a href="//github.com/HackerWins/summernote/issues" target="_blank">Issues</a></p></div></div></div></div>'};return'<div class="note-dialog">'+i()+j()+m()+h()+"</div>"},f=function(){return'<div class="note-resizebar"><div class="note-icon-bar"></div><div class="note-icon-bar"></div><div class="note-icon-bar"></div></div>'};var X=function(g,e){g.find("button").each(function(j,h){var i=R(h),k=i.attr(Q.bMac?"data-mac-shortcut":"data-shortcut");k&&i.attr("title",function(l,d){return d+" ("+k+")"})}).tooltip({container:"body",trigger:"hover",placement:e||"top"}).on("click",function(){R(this).tooltip("hide")})},Y=[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]],Z=function(d){d.find(".note-color-palette").each(function(){for(var q=R(this),r=q.attr("data-target-event"),Ac=[],l=0,Aa=Y.length;Aa>l;l++){for(var Ab=Y[l],o=[],p=0,m=Ab.length;m>p;p++){var n=Ab[p];o.push(['<button type="button" class="note-color-btn" style="background-color:',n,';" data-event="',r,'" data-value="',n,'" title="',n,'" data-toggle="button" tabindex="-1"></button>'].join(""))}Ac.push("<div>"+o.join("")+"</div>")}q.html(Ac.join(""))})};this.createLayout=function(Ag,Ab){var r=Ag.next();if(!r||!r.hasClass("note-editor")){var Aa=R('<div class="note-editor"></div>');Ab.width&&Aa.width(Ab.width),Ab.height>0&&R('<div class="note-statusbar">'+f()+"</div>").prependTo(Aa);var Ae=!Ag.is(":disabled"),Af=R('<div class="note-editable" contentEditable="'+Ae+'"></div>').prependTo(Aa);Ab.height&&Af.height(Ab.height),Ab.direction&&Af.attr("dir",Ab.direction),Af.html(S.html(Ag)||S.emptyPara),R('<textarea class="note-codable"></textarea>').prependTo(Aa);for(var Ac=R.summernote.lang[Ab.lang],Ad="",d=0,b=Ab.toolbar.length;b>d;d++){var h=Ab.toolbar[d];Ad+='<div class="note-'+h[0]+' btn-group">';for(var p=0,e=h[1].length;e>p;p++){Ad+=x[h[1][p]](Ac)}Ad+="</div>"}Ad='<div class="note-toolbar btn-toolbar">'+Ad+"</div>";var g=R(Ad).prependTo(Aa);Z(g),X(g,"bottom");var Ai=R(z(Ac)).prependTo(Aa);X(Ai),R(W()).prependTo(Aa);var Ah=R(y(Ac,Ab)).prependTo(Aa);Ah.find("button.close, a.modal-close").click(function(){R(this).closest(".modal").modal("hide")}),R('<div class="note-dropzone"><div class="note-dropzone-message"></div></div>').prependTo(Aa),Aa.insertAfter(Ag),Ag.hide()}},this.layoutInfoFromHolder=function(i){var g=i.next();if(g.hasClass("note-editor")){var h=S.buildLayoutInfo(g);for(var e in h){h.hasOwnProperty(e)&&(h[e]=h[e].call())}return h}},this.removeLayout=function(e){var d=this.layoutInfoFromHolder(e);d&&(e.html(d.editable.html()),d.editor.remove(),e.show())}};R.summernote=R.summernote||{},R.extend(R.summernote,T);var G=new F,E=new B;R.fn.extend({summernote:function(W){if(W=R.extend({},R.summernote.options,W),this.each(function(b,Z){var a=R(Z);G.createLayout(a,W);var Y=G.layoutInfoFromHolder(a);E.attach(Y,W),S.isTextarea(a[0])&&a.closest("form").submit(function(){a.html(a.code())})}),this.first()&&W.focus){var X=G.layoutInfoFromHolder(this.first());X.editable.focus()}return this.length>0&&W.oninit&&W.oninit(),this},code:function(Y){if(void 0===Y){var W=this.first();if(0===W.length){return}var X=G.layoutInfoFromHolder(W);if(X&&X.editable){var Z=X.editor.hasClass("codeview");return Z&&Q.bCodeMirror&&X.codable.data("cmEditor").save(),Z?X.codable.val():X.editable.html()}return W.html()}return this.each(function(f,a){var b=G.layoutInfoFromHolder(R(a));b&&b.editable&&b.editable.html(Y)}),this},destroy:function(){return this.each(function(Y,Z){var W=R(Z),X=G.layoutInfoFromHolder(W);X&&X.editable&&(E.dettach(X),G.removeLayout(W))}),this}})});