/* pace 0.5.1 */
(function(){var AW,AU,AV,AZ,Aa,AX,AY,AO,AP,AM,AN,AS,AT,AQ,AR,AG,AH,AE,AF,AK,AL,AI,AJ,AC,AD,AB,Aw,Au,Av,Az,AA,Ax,Ay,Ao,Ap,Am,An,As,At,Aq,Ar,Ag,Ah,Ae,Af,Ak,Al,Ai,Aj=[].slice,Ac={}.hasOwnProperty,Ad=function(D,B){function C(){this.constructor=D}for(var A in B){Ac.call(B,A)&&(D[A]=B[A])}return C.prototype=B.prototype,D.prototype=new C,D.__super__=B.prototype,D},Ab=[].indexOf||function(C){for(var A=0,B=this.length;B>A;A++){if(A in this&&this[A]===C){return A}}return -1};for(AK={catchupTime:500,initialRate:0.03,minTime:500,ghostTime:500,maxProgressPerFrame:10,easeFactor:1.25,startOnPageLoad:!0,restartOnPushState:!0,restartOnRequestAfter:500,target:"body",elements:{checkInterval:100,selectors:["body"]},eventLag:{minSamples:10,sampleCount:3,lagThreshold:3},ajax:{trackMethods:["GET"],trackWebSockets:!0,ignoreURLs:[]}},Au=function(){var A;return null!=(A="undefined"!=typeof performance&&null!==performance?"function"==typeof performance.now?performance.now():void 0:void 0)?A:+new Date},Az=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,AF=window.cancelAnimationFrame||window.mozCancelAnimationFrame,null==Az&&(Az=function(A){return setTimeout(A,50)},AF=function(A){return clearTimeout(A)}),Ax=function(C){var A,B;return A=Au(),(B=function(){var D;return D=Au()-A,D>=33?(A=Au(),C(D,function(){return Az(B)})):setTimeout(B,33-D)})()},AA=function(){var C,A,B;return B=arguments[0],A=arguments[1],C=3<=arguments.length?Aj.call(arguments,2):[],"function"==typeof B[A]?B[A].apply(B,C):B[A]},AL=function(){var F,D,E,B,C,G,A;for(D=arguments[0],B=2<=arguments.length?Aj.call(arguments,1):[],G=0,A=B.length;A>G;G++){if(E=B[G]){for(F in E){Ac.call(E,F)&&(C=E[F],null!=D[F]&&"object"==typeof D[F]&&null!=C&&"object"==typeof C?AL(D[F],C):D[F]=C)}}}return D},AG=function(E){var C,D,A,B,F;for(D=C=0,B=0,F=E.length;F>B;B++){A=E[B],D+=Math.abs(A),C++}return D/C},AJ=function(E,C){var D,A,B;if(null==E&&(E="options"),null==C&&(C=!0),B=document.querySelector("[data-pace-"+E+"]")){if(D=B.getAttribute("data-pace-"+E),!C){return D}try{return JSON.parse(D)}catch(F){return A=F,"undefined"!=typeof console&&null!==console?console.error("Error parsing inline pace options",A):void 0}}},AY=function(){function A(){}return A.prototype.on=function(F,D,E,B){var C;return null==B&&(B=!1),null==this.bindings&&(this.bindings={}),null==(C=this.bindings)[F]&&(C[F]=[]),this.bindings[F].push({handler:D,ctx:E,once:B})},A.prototype.once=function(D,B,C){return this.on(D,B,C,!0)},A.prototype.off=function(F,D){var E,B,C;if(null!=(null!=(B=this.bindings)?B[F]:void 0)){if(null==D){return delete this.bindings[F]}for(E=0,C=[];E<this.bindings[F].length;){this.bindings[F][E].handler===D?C.push(this.bindings[F].splice(E,1)):C.push(E++)}return C}},A.prototype.trigger=function(){var G,E,F,J,B,H,I,C,D;if(F=arguments[0],G=2<=arguments.length?Aj.call(arguments,1):[],null!=(I=this.bindings)?I[F]:void 0){for(B=0,D=[];B<this.bindings[F].length;){C=this.bindings[F][B],J=C.handler,E=C.ctx,H=C.once,J.apply(null!=E?E:this,G),H?D.push(this.bindings[F].splice(B,1)):D.push(B++)}return D}},A}(),null==window.Pace&&(window.Pace={}),AL(Pace,AY.prototype),Av=Pace.options=AL({},AK,window.paceOptions,AJ()),Ak=["ajax","document","eventLag","elements"],Ag=0,Ae=Ak.length;Ae>Ag;Ag++){Am=Ak[Ag],Av[Am]===!0&&(Av[Am]=AK[Am])}AP=function(B){function A(){return Al=A.__super__.constructor.apply(this,arguments)}return Ad(A,B),A}(Error),AU=function(){function A(){this.progress=0}return A.prototype.getElement=function(){var B;if(null==this.el){if(B=document.querySelector(Av.target),!B){throw new AP}this.el=document.createElement("div"),this.el.className="pace pace-active",document.body.className=document.body.className.replace(/pace-done/g,""),document.body.className+=" pace-running",this.el.innerHTML='<div class="pace-progress">\n  <div class="pace-progress-inner"></div>\n</div>\n<div class="pace-activity"></div>',null!=B.firstChild?B.insertBefore(this.el,B.firstChild):B.appendChild(this.el)}return this.el},A.prototype.finish=function(){var B;return B=this.getElement(),B.className=B.className.replace("pace-active",""),B.className+=" pace-inactive",document.body.className=document.body.className.replace("pace-running",""),document.body.className+=" pace-done"},A.prototype.update=function(B){return this.progress=B,this.render()},A.prototype.destroy=function(){try{this.getElement().parentNode.removeChild(this.getElement())}catch(B){AP=B}return this.el=void 0},A.prototype.render=function(){var C,B;return null==document.querySelector(Av.target)?!1:(C=this.getElement(),C.children[0].style.width=""+this.progress+"%",(!this.lastRenderedProgress||this.lastRenderedProgress|0!==this.progress|0)&&(C.children[0].setAttribute("data-progress-text",""+(0|this.progress)+"%"),this.progress>=100?B="99":(B=this.progress<10?"0":"",B+=0|this.progress),C.children[0].setAttribute("data-progress",""+B)),this.lastRenderedProgress=this.progress)},A.prototype.done=function(){return this.progress>=100},A}(),AO=function(){function A(){this.bindings={}}return A.prototype.trigger=function(G,E){var F,C,D,H,B;if(null!=this.bindings[G]){for(H=this.bindings[G],B=[],C=0,D=H.length;D>C;C++){F=H[C],B.push(F.call(this,E))}return B}},A.prototype.on=function(D,B){var C;return null==(C=this.bindings)[D]&&(C[D]=[]),this.bindings[D].push(B)},A}(),Ar=window.XMLHttpRequest,Aq=window.XDomainRequest,At=window.WebSocket,AI=function(F,D){var E,B,C,G;G=[];for(B in D.prototype){try{C=D.prototype[B],null==F[B]&&"function"!=typeof C?G.push(F[B]=C):G.push(void 0)}catch(A){E=A}}return G},AB=[],Pace.ignore=function(){var C,A,B;return A=arguments[0],C=2<=arguments.length?Aj.call(arguments,1):[],AB.unshift("ignore"),B=A.apply(null,C),AB.shift(),B},Pace.track=function(){var C,A,B;return A=arguments[0],C=2<=arguments.length?Aj.call(arguments,1):[],AB.unshift("track"),B=A.apply(null,C),AB.shift(),B},Ap=function(B){var A;if(null==B&&(B="GET"),"track"===AB[0]){return"force"}if(!AB.length&&Av.ajax){if("socket"===B&&Av.ajax.trackWebSockets){return !0}if(A=B.toUpperCase(),Ab.call(Av.ajax.trackMethods,A)>=0){return !0}}return !1},AM=function(B){function A(){var D,C=this;A.__super__.constructor.apply(this,arguments),D=function(F){var E;return E=F.open,F.open=function(G,H){return Ap(G)&&C.trigger("request",{type:G,url:H,request:F}),E.apply(F,arguments)}},window.XMLHttpRequest=function(E){var F;return F=new Ar(E),D(F),F},AI(window.XMLHttpRequest,Ar),null!=Aq&&(window.XDomainRequest=function(){var E;return E=new Aq,D(E),E},AI(window.XDomainRequest,Aq)),null!=At&&Av.ajax.trackWebSockets&&(window.WebSocket=function(G,F){var E;return E=null!=F?new At(G,F):new At(G),Ap("socket")&&C.trigger("request",{type:"socket",url:G,protocols:F,request:E}),E},AI(window.WebSocket,At))}return Ad(A,B),A}(AO),Ah=null,AC=function(){return null==Ah&&(Ah=new AM),Ah},Ao=function(E){var C,D,A,B;for(B=Av.ajax.ignoreURLs,D=0,A=B.length;A>D;D++){if(C=B[D],"string"==typeof C){if(-1!==E.indexOf(C)){return !0}}else{if(C.test(E)){return !0}}}return !1},AC().on("request",function(D){var E,B,C,F,A;return F=D.type,C=D.request,A=D.url,Ao(A)?void 0:Pace.running||Av.restartOnRequestAfter===!1&&"force"!==Ap(F)?void 0:(B=arguments,E=Av.restartOnRequestAfter||0,"boolean"==typeof E&&(E=0),setTimeout(function(){var J,K,G,H,I,L;if(J="socket"===F?C.readyState<2:0<(H=C.readyState)&&4>H){for(Pace.restart(),I=Pace.sources,L=[],K=0,G=I.length;G>K;K++){if(Am=I[K],Am instanceof AW){Am.watch.apply(Am,B);break}L.push(void 0)}return L}},E))}),AW=function(){function A(){var B=this;this.elements=[],AC().on("request",function(){return B.watch.apply(B,arguments)})}return A.prototype.watch=function(F){var D,E,B,C;return B=F.type,D=F.request,C=F.url,Ao(C)?void 0:(E="socket"===B?new AT(D):new AQ(D),this.elements.push(E))},A}(),AQ=function(){function A(F){var D,E,I,B,G,H,C=this;if(this.progress=0,null!=window.ProgressEvent){for(E=null,F.addEventListener("progress",function(J){return C.progress=J.lengthComputable?100*J.loaded/J.total:C.progress+(100-C.progress)/2}),H=["load","abort","timeout","error"],I=0,B=H.length;B>I;I++){D=H[I],F.addEventListener(D,function(){return C.progress=100})}}else{G=F.onreadystatechange,F.onreadystatechange=function(){var J;return 0===(J=F.readyState)||4===J?C.progress=100:3===F.readyState&&(C.progress=50),"function"==typeof G?G.apply(null,arguments):void 0}}}return A}(),AT=function(){function A(F){var D,E,B,C,G=this;for(this.progress=0,C=["error","open"],E=0,B=C.length;B>E;E++){D=C[E],F.addEventListener(D,function(){return G.progress=100})}}return A}(),AZ=function(){function A(E){var C,D,B,F;for(null==E&&(E={}),this.elements=[],null==E.selectors&&(E.selectors=[]),F=E.selectors,D=0,B=F.length;B>D;D++){C=F[D],this.elements.push(new Aa(C))}}return A}(),Aa=function(){function A(B){this.selector=B,this.progress=0,this.check()}return A.prototype.check=function(){var B=this;return document.querySelector(this.selector)?this.done():setTimeout(function(){return B.check()},Av.elements.checkInterval)},A.prototype.done=function(){return this.progress=100},A}(),AV=function(){function A(){var D,B,C=this;this.progress=null!=(B=this.states[document.readyState])?B:100,D=document.onreadystatechange,document.onreadystatechange=function(){return null!=C.states[document.readyState]&&(C.progress=C.states[document.readyState]),"function"==typeof D?D.apply(null,arguments):void 0}}return A.prototype.states={loading:0,interactive:50,complete:100},A}(),AX=function(){function A(){var F,D,E,B,C,G=this;this.progress=0,F=0,C=[],B=0,E=Au(),D=setInterval(function(){var H;return H=Au()-E-50,E=Au(),C.push(H),C.length>Av.eventLag.sampleCount&&C.shift(),F=AG(C),++B>=Av.eventLag.minSamples&&F<Av.eventLag.lagThreshold?(G.progress=100,clearInterval(D)):G.progress=100*(3/(F+3))},50)}return A}(),AS=function(){function A(B){this.source=B,this.last=this.sinceLastUpdate=0,this.rate=Av.initialRate,this.catchup=0,this.progress=this.lastProgress=0,null!=this.source&&(this.progress=AA(this.source,"progress"))}return A.prototype.tick=function(D,B){var C;return null==B&&(B=AA(this.source,"progress")),B>=100&&(this.done=!0),B===this.last?this.sinceLastUpdate+=D:(this.sinceLastUpdate&&(this.rate=(B-this.last)/this.sinceLastUpdate),this.catchup=(B-this.progress)/Av.catchupTime,this.sinceLastUpdate=0,this.last=B),B>this.progress&&(this.progress+=this.catchup*D),C=1-Math.pow(this.progress/100,Av.easeFactor),this.progress+=C*this.rate*D,this.progress=Math.min(this.lastProgress+Av.maxProgressPerFrame,this.progress),this.progress=Math.max(0,this.progress),this.progress=Math.min(100,this.progress),this.lastProgress=this.progress,this.progress},A}(),An=null,Ay=null,AH=null,As=null,AR=null,AE=null,Pace.running=!1,AD=function(){return Av.restartOnPushState?Pace.restart():void 0},null!=window.history.pushState&&(Af=window.history.pushState,window.history.pushState=function(){return AD(),Af.apply(window.history,arguments)}),null!=window.history.replaceState&&(Ai=window.history.replaceState,window.history.replaceState=function(){return AD(),Ai.apply(window.history,arguments)}),AN={ajax:AW,elements:AZ,document:AV,eventLag:AX},(Aw=function(){var E,D,H,A,F,G,B,C;for(Pace.sources=An=[],G=["ajax","elements","document","eventLag"],D=0,A=G.length;A>D;D++){E=G[D],Av[E]!==!1&&An.push(new AN[E](Av[E]))}for(C=null!=(B=Av.extraSources)?B:[],H=0,F=C.length;F>H;H++){Am=C[H],An.push(new Am(Av))}return Pace.bar=AH=new AU,Ay=[],As=new AS})(),Pace.stop=function(){return Pace.trigger("stop"),Pace.running=!1,AH.destroy(),AE=!0,null!=AR&&("function"==typeof AF&&AF(AR),AR=null),Aw()},Pace.restart=function(){return Pace.trigger("restart"),Pace.stop(),Pace.start()},Pace.go=function(){var A;return Pace.running=!0,AH.render(),A=Au(),AE=!1,AR=Ax(function(N,O){var R,S,P,Q,I,J,G,H,M,K,L,C,B,E,F,D;for(H=100-AH.progress,S=L=0,P=!0,J=C=0,E=An.length;E>C;J=++C){for(Am=An[J],K=null!=Ay[J]?Ay[J]:Ay[J]=[],I=null!=(D=Am.elements)?D:[Am],G=B=0,F=I.length;F>B;G=++B){Q=I[G],M=null!=K[G]?K[G]:K[G]=new AS(Q),P&=M.done,M.done||(S++,L+=M.tick(N))}}return R=L/S,AH.update(As.tick(N,R)),AH.done()||P||AE?(AH.update(100),Pace.trigger("done"),setTimeout(function(){return AH.finish(),Pace.running=!1,Pace.trigger("hide")},Math.max(Av.ghostTime,Math.max(Av.minTime-(Au()-A),0)))):O()})},Pace.start=function(B){AL(Av,B),Pace.running=!0;try{AH.render()}catch(A){AP=A}return document.querySelector(".pace")?(Pace.trigger("start"),Pace.go()):setTimeout(Pace.start,50)},"function"==typeof define&&define.amd?define(function(){return Pace}):"object"==typeof exports?module.exports=Pace:Av.startOnPageLoad&&Pace.start()}).call(this);