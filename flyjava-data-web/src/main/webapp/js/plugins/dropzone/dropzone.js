(function(){function A(C){var B=A.modules[C];if(!B){throw new Error('failed to require "'+C+'"')}if(!("exports" in B)&&typeof B.definition==="function"){B.client=B.component=true;B.definition.call(this,B.exports={},B);delete B.definition}return B.exports}A.modules={};A.register=function(C,B){A.modules[C]={definition:B}};A.define=function(B,C){A.modules[B]={exports:C}};A.register("component~emitter@1.1.2",function(E,C){C.exports=B;function B(F){if(F){return D(F)}}function D(G){for(var F in B.prototype){G[F]=B.prototype[F]}return G}B.prototype.on=B.prototype.addEventListener=function(G,F){this._callbacks=this._callbacks||{};(this._callbacks[G]=this._callbacks[G]||[]).push(F);return this};B.prototype.once=function(H,G){var F=this;this._callbacks=this._callbacks||{};function I(){F.off(H,I);G.apply(this,arguments)}I.fn=G;this.on(H,I);return this};B.prototype.off=B.prototype.removeListener=B.prototype.removeAllListeners=B.prototype.removeEventListener=function(I,H){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this}var J=this._callbacks[I];if(!J){return this}if(1==arguments.length){delete this._callbacks[I];return this}var F;for(var G=0;G<J.length;G++){F=J[G];if(F===H||F.fn===H){J.splice(G,1);break}}return this};B.prototype.emit=function(H){this._callbacks=this._callbacks||{};var J=[].slice.call(arguments,1),G=this._callbacks[H];if(G){G=G.slice(0);for(var F=0,I=G.length;F<I;++F){G[F].apply(this,J)}}return this};B.prototype.listeners=function(F){this._callbacks=this._callbacks||{};return this._callbacks[F]||[]};B.prototype.hasListeners=function(F){return !!this.listeners(F).length}});A.register("dropzone",function(C,B){B.exports=A("dropzone/lib/dropzone.js")});A.register("dropzone/lib/dropzone.js",function(C,B){(function(){var D,G,E,H,J,F,L,M,I={}.hasOwnProperty,N=function(P,Q){for(var O in Q){if(I.call(Q,O)){P[O]=Q[O]}}function R(){this.constructor=P}R.prototype=Q.prototype;P.prototype=new R();P.__super__=Q.prototype;return P},K=[].slice;G=typeof Emitter!=="undefined"&&Emitter!==null?Emitter:A("component~emitter@1.1.2");L=function(){};D=(function(P){var Q;N(O,P);O.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached"];O.prototype.defaultOptions={url:null,method:"post",withCredentials:false,parallelUploads:2,uploadMultiple:false,maxFilesize:256,paramName:"file",createImageThumbnails:true,maxThumbnailFilesize:10,thumbnailWidth:100,thumbnailHeight:100,maxFiles:null,params:{},clickable:true,ignoreHiddenFiles:true,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:true,autoQueue:true,addRemoveLinks:false,previewsContainer:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",accept:function(S,R){return R()},init:function(){return L},forceFallback:false,fallback:function(){var S,V,R,U,W,T;this.element.className=""+this.element.className+" dz-browser-not-supported";T=this.element.getElementsByTagName("div");for(U=0,W=T.length;U<W;U++){S=T[U];if(/(^| )dz-message($| )/.test(S.className)){V=S;S.className="dz-message";continue}}if(!V){V=O.createElement('<div class="dz-message"><span></span></div>');this.element.appendChild(V)}R=V.getElementsByTagName("span")[0];if(R){R.textContent=this.options.dictFallbackMessage}return this.element.appendChild(this.getFallbackForm())},resize:function(U){var T,R,S;T={srcX:0,srcY:0,srcWidth:U.width,srcHeight:U.height};R=U.width/U.height;S=this.options.thumbnailWidth/this.options.thumbnailHeight;if(U.height<this.options.thumbnailHeight||U.width<this.options.thumbnailWidth){T.trgHeight=T.srcHeight;T.trgWidth=T.srcWidth}else{if(R>S){T.srcHeight=U.height;T.srcWidth=T.srcHeight*S}else{T.srcWidth=U.width;T.srcHeight=T.srcWidth/S}}T.srcX=(U.width-T.srcWidth)/2;T.srcY=(U.height-T.srcHeight)/2;return T},drop:function(R){return this.element.classList.remove("dz-drag-hover")},dragstart:L,dragend:function(R){return this.element.classList.remove("dz-drag-hover")},dragenter:function(R){return this.element.classList.add("dz-drag-hover")},dragover:function(R){return this.element.classList.add("dz-drag-hover")},dragleave:function(R){return this.element.classList.remove("dz-drag-hover")},paste:L,reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(Z){var a,R,T,d,X,V,U,S,Y,e,W,b,c;if(this.element===this.previewsContainer){this.element.classList.add("dz-started")}Z.previewElement=O.createElement(this.options.previewTemplate.trim());Z.previewTemplate=Z.previewElement;this.previewsContainer.appendChild(Z.previewElement);e=Z.previewElement.querySelectorAll("[data-dz-name]");for(d=0,U=e.length;d<U;d++){a=e[d];a.textContent=Z.name}W=Z.previewElement.querySelectorAll("[data-dz-size]");for(X=0,S=W.length;X<S;X++){a=W[X];a.innerHTML=this.filesize(Z.size)}if(this.options.addRemoveLinks){Z._removeLink=O.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>");Z.previewElement.appendChild(Z._removeLink)}R=(function(f){return function(g){g.preventDefault();g.stopPropagation();if(Z.status===O.UPLOADING){return O.confirm(f.options.dictCancelUploadConfirmation,function(){return f.removeFile(Z)})}else{if(f.options.dictRemoveFileConfirmation){return O.confirm(f.options.dictRemoveFileConfirmation,function(){return f.removeFile(Z)})}else{return f.removeFile(Z)}}}})(this);b=Z.previewElement.querySelectorAll("[data-dz-remove]");c=[];for(V=0,Y=b.length;V<Y;V++){T=b[V];c.push(T.addEventListener("click",R))}return c},removedfile:function(S){var R;if((R=S.previewElement)!=null){R.parentNode.removeChild(S.previewElement)}return this._updateMaxFilesReachedClass()},thumbnail:function(W,T){var R,V,X,U,S;W.previewElement.classList.remove("dz-file-preview");W.previewElement.classList.add("dz-image-preview");U=W.previewElement.querySelectorAll("[data-dz-thumbnail]");S=[];for(V=0,X=U.length;V<X;V++){R=U[V];R.alt=W.name;S.push(R.src=T)}return S},error:function(W,R){var T,S,X,U,V;W.previewElement.classList.add("dz-error");if(typeof R!=="String"&&R.error){R=R.error}U=W.previewElement.querySelectorAll("[data-dz-errormessage]");V=[];for(S=0,X=U.length;S<X;S++){T=U[S];V.push(T.textContent=R)}return V},errormultiple:L,processing:function(R){R.previewElement.classList.add("dz-processing");if(R._removeLink){return R._removeLink.textContent=this.options.dictCancelUpload}},processingmultiple:L,uploadprogress:function(V,Y,X){var W,T,S,R,U;R=V.previewElement.querySelectorAll("[data-dz-uploadprogress]");U=[];for(T=0,S=R.length;T<S;T++){W=R[T];U.push(W.style.width=""+Y+"%")}return U},totaluploadprogress:L,sending:L,sendingmultiple:L,success:function(R){return R.previewElement.classList.add("dz-success")},successmultiple:L,canceled:function(R){return this.emit("error",R,"Upload canceled.")},canceledmultiple:L,complete:function(R){if(R._removeLink){return R._removeLink.textContent=this.options.dictRemoveFile}},completemultiple:L,maxfilesexceeded:L,maxfilesreached:L,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-details">\n    <div class="dz-filename"><span data-dz-name></span></div>\n    <div class="dz-size" data-dz-size></div>\n    <img data-dz-thumbnail />\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-success-mark"><span>✔</span></div>\n  <div class="dz-error-mark"><span>✘</span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n</div>'};Q=function(){var S,V,R,W,U,T,X;W=arguments[0],R=2<=arguments.length?K.call(arguments,1):[];for(T=0,X=R.length;T<X;T++){V=R[T];for(S in V){U=V[S];W[S]=U}}return W};function O(U,S){var T,R,V;this.element=U;this.version=O.version;this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,"");this.clickableElements=[];this.listeners=[];this.files=[];if(typeof this.element==="string"){this.element=document.querySelector(this.element)}if(!(this.element&&(this.element.nodeType!=null))){throw new Error("Invalid dropzone element.")}if(this.element.dropzone){throw new Error("Dropzone already attached.")}O.instances.push(this);this.element.dropzone=this;T=(V=O.optionsForElement(this.element))!=null?V:{};this.options=Q({},this.defaultOptions,T,S!=null?S:{});if(this.options.forceFallback||!O.isBrowserSupported()){return this.options.fallback.call(this)}if(this.options.url==null){this.options.url=this.element.getAttribute("action")}if(!this.options.url){throw new Error("No URL provided.")}if(this.options.acceptedFiles&&this.options.acceptedMimeTypes){throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.")}if(this.options.acceptedMimeTypes){this.options.acceptedFiles=this.options.acceptedMimeTypes;delete this.options.acceptedMimeTypes}this.options.method=this.options.method.toUpperCase();if((R=this.getExistingFallback())&&R.parentNode){R.parentNode.removeChild(R)}if(this.options.previewsContainer){this.previewsContainer=O.getElement(this.options.previewsContainer,"previewsContainer")}else{this.previewsContainer=this.element}if(this.options.clickable){if(this.options.clickable===true){this.clickableElements=[this.element]}else{this.clickableElements=O.getElements(this.options.clickable,"clickable")}}this.init()}O.prototype.getAcceptedFiles=function(){var U,S,V,T,R;T=this.files;R=[];for(S=0,V=T.length;S<V;S++){U=T[S];if(U.accepted){R.push(U)}}return R};O.prototype.getRejectedFiles=function(){var U,S,V,T,R;T=this.files;R=[];for(S=0,V=T.length;S<V;S++){U=T[S];if(!U.accepted){R.push(U)}}return R};O.prototype.getFilesWithStatus=function(U){var V,S,W,T,R;T=this.files;R=[];for(S=0,W=T.length;S<W;S++){V=T[S];if(V.status===U){R.push(V)}}return R};O.prototype.getQueuedFiles=function(){return this.getFilesWithStatus(O.QUEUED)};O.prototype.getUploadingFiles=function(){return this.getFilesWithStatus(O.UPLOADING)};O.prototype.getActiveFiles=function(){var U,S,V,T,R;T=this.files;R=[];for(S=0,V=T.length;S<V;S++){U=T[S];if(U.status===O.UPLOADING||U.status===O.QUEUED){R.push(U)}}return R};O.prototype.init=function(){var U,T,W,R,X,S,V;if(this.element.tagName==="form"){this.element.setAttribute("enctype","multipart/form-data")}if(this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")){this.element.appendChild(O.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>"))}if(this.clickableElements.length){W=(function(Y){return function(){if(Y.hiddenFileInput){document.body.removeChild(Y.hiddenFileInput)}Y.hiddenFileInput=document.createElement("input");Y.hiddenFileInput.setAttribute("type","file");if((Y.options.maxFiles==null)||Y.options.maxFiles>1){Y.hiddenFileInput.setAttribute("multiple","multiple")}Y.hiddenFileInput.className="dz-hidden-input";if(Y.options.acceptedFiles!=null){Y.hiddenFileInput.setAttribute("accept",Y.options.acceptedFiles)}Y.hiddenFileInput.style.visibility="hidden";Y.hiddenFileInput.style.position="absolute";Y.hiddenFileInput.style.top="0";Y.hiddenFileInput.style.left="0";Y.hiddenFileInput.style.height="0";Y.hiddenFileInput.style.width="0";document.body.appendChild(Y.hiddenFileInput);return Y.hiddenFileInput.addEventListener("change",function(){var b,a,Z,c;a=Y.hiddenFileInput.files;if(a.length){for(Z=0,c=a.length;Z<c;Z++){b=a[Z];Y.addFile(b)}}return W()})}})(this);W()}this.URL=(S=window.URL)!=null?S:window.webkitURL;V=this.events;for(R=0,X=V.length;R<X;R++){U=V[R];this.on(U,this.options[U])}this.on("uploadprogress",(function(Y){return function(){return Y.updateTotalUploadProgress()}})(this));this.on("removedfile",(function(Y){return function(){return Y.updateTotalUploadProgress()}})(this));this.on("canceled",(function(Y){return function(Z){return Y.emit("complete",Z)}})(this));this.on("complete",(function(Y){return function(Z){if(Y.getUploadingFiles().length===0&&Y.getQueuedFiles().length===0){return setTimeout((function(){return Y.emit("queuecomplete")}),0)}}})(this));T=function(Y){Y.stopPropagation();if(Y.preventDefault){return Y.preventDefault()}else{return Y.returnValue=false}};this.listeners=[{element:this.element,events:{"dragstart":(function(Y){return function(Z){return Y.emit("dragstart",Z)}})(this),"dragenter":(function(Y){return function(Z){T(Z);return Y.emit("dragenter",Z)}})(this),"dragover":(function(Y){return function(a){var Z;try{Z=a.dataTransfer.effectAllowed}catch(b){}a.dataTransfer.dropEffect="move"===Z||"linkMove"===Z?"move":"copy";T(a);return Y.emit("dragover",a)}})(this),"dragleave":(function(Y){return function(Z){return Y.emit("dragleave",Z)}})(this),"drop":(function(Y){return function(Z){T(Z);return Y.drop(Z)}})(this),"dragend":(function(Y){return function(Z){return Y.emit("dragend",Z)}})(this)}}];this.clickableElements.forEach((function(Y){return function(Z){return Y.listeners.push({element:Z,events:{"click":function(a){if((Z!==Y.element)||(a.target===Y.element||O.elementInside(a.target,Y.element.querySelector(".dz-message")))){return Y.hiddenFileInput.click()}}}})}})(this));this.enable();return this.options.init.call(this)};O.prototype.destroy=function(){var R;this.disable();this.removeAllFiles(true);if((R=this.hiddenFileInput)!=null?R.parentNode:void 0){this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput);this.hiddenFileInput=null}delete this.element.dropzone;return O.instances.splice(O.instances.indexOf(this),1)};O.prototype.updateTotalUploadProgress=function(){var X,W,V,U,R,T,S,Y;U=0;V=0;X=this.getActiveFiles();if(X.length){Y=this.getActiveFiles();for(T=0,S=Y.length;T<S;T++){W=Y[T];U+=W.upload.bytesSent;V+=W.upload.total}R=100*U/V}else{R=100}return this.emit("totaluploadprogress",R,V,U)};O.prototype.getFallbackForm=function(){var T,U,R,S;if(T=this.getExistingFallback()){return T}R='<div class="dz-fallback">';if(this.options.dictFallbackText){R+="<p>"+this.options.dictFallbackText+"</p>"}R+='<input type="file" name="'+this.options.paramName+(this.options.uploadMultiple?"[]":"")+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>';U=O.createElement(R);if(this.element.tagName!=="FORM"){S=O.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>');S.appendChild(U)}else{this.element.setAttribute("enctype","multipart/form-data");this.element.setAttribute("method",this.options.method)}return S!=null?S:U};O.prototype.getExistingFallback=function(){var R,U,S,T,W,V;U=function(Z){var X,Y,a;for(Y=0,a=Z.length;Y<a;Y++){X=Z[Y];if(/(^| )fallback($| )/.test(X.className)){return X}}};V=["div","form"];for(T=0,W=V.length;T<W;T++){S=V[T];if(R=U(this.element.getElementsByTagName(S))){return R}}};O.prototype.setupEventListeners=function(){var V,W,R,T,X,U,S;U=this.listeners;S=[];for(T=0,X=U.length;T<X;T++){V=U[T];S.push((function(){var Z,Y;Z=V.events;Y=[];for(W in Z){R=Z[W];Y.push(V.element.addEventListener(W,R,false))}return Y})())}return S};O.prototype.removeEventListeners=function(){var V,W,R,T,X,U,S;U=this.listeners;S=[];for(T=0,X=U.length;T<X;T++){V=U[T];S.push((function(){var Z,Y;Z=V.events;Y=[];for(W in Z){R=Z[W];Y.push(V.element.removeEventListener(W,R,false))}return Y})())}return S};O.prototype.disable=function(){var U,S,V,T,R;this.clickableElements.forEach(function(W){return W.classList.remove("dz-clickable")});this.removeEventListeners();T=this.files;R=[];for(S=0,V=T.length;S<V;S++){U=T[S];R.push(this.cancelUpload(U))}return R};O.prototype.enable=function(){this.clickableElements.forEach(function(R){return R.classList.add("dz-clickable")});return this.setupEventListeners()};O.prototype.filesize=function(R){var S;if(R>=1024*1024*1024*1024/10){R=R/(1024*1024*1024*1024/10);S="TiB"}else{if(R>=1024*1024*1024/10){R=R/(1024*1024*1024/10);S="GiB"}else{if(R>=1024*1024/10){R=R/(1024*1024/10);S="MiB"}else{if(R>=1024/10){R=R/(1024/10);S="KiB"}else{R=R*10;S="b"}}}}return"<strong>"+(Math.round(R)/10)+"</strong> "+S};O.prototype._updateMaxFilesReachedClass=function(){if((this.options.maxFiles!=null)&&this.getAcceptedFiles().length>=this.options.maxFiles){if(this.getAcceptedFiles().length===this.options.maxFiles){this.emit("maxfilesreached",this.files)}return this.element.classList.add("dz-max-files-reached")}else{return this.element.classList.remove("dz-max-files-reached")}};O.prototype.drop=function(R){var T,S;if(!R.dataTransfer){return}this.emit("drop",R);T=R.dataTransfer.files;if(T.length){S=R.dataTransfer.items;if(S&&S.length&&(S[0].webkitGetAsEntry!=null)){this._addFilesFromItems(S)}else{this.handleFiles(T)}}};O.prototype.paste=function(R){var T,S;if((R!=null?(S=R.clipboardData)!=null?S.items:void 0:void 0)==null){return}this.emit("paste",R);T=R.clipboardData.items;if(T.length){return this._addFilesFromItems(T)}};O.prototype.handleFiles=function(T){var U,R,V,S;S=[];for(R=0,V=T.length;R<V;R++){U=T[R];S.push(this.addFile(U))}return S};O.prototype._addFilesFromItems=function(V){var U,T,S,W,R;R=[];for(S=0,W=V.length;S<W;S++){T=V[S];if((T.webkitGetAsEntry!=null)&&(U=T.webkitGetAsEntry())){if(U.isFile){R.push(this.addFile(T.getAsFile()))}else{if(U.isDirectory){R.push(this._addFilesFromDirectory(U,U.name))}else{R.push(void 0)}}}else{if(T.getAsFile!=null){if((T.kind==null)||T.kind==="file"){R.push(this.addFile(T.getAsFile()))}else{R.push(void 0)}}else{R.push(void 0)}}}return R};O.prototype._addFilesFromDirectory=function(S,U){var R,T;R=S.createReader();T=(function(V){return function(Y){var X,W,Z;for(W=0,Z=Y.length;W<Z;W++){X=Y[W];if(X.isFile){X.file(function(a){if(V.options.ignoreHiddenFiles&&a.name.substring(0,1)==="."){return}a.fullPath=""+U+"/"+a.name;return V.addFile(a)})}else{if(X.isDirectory){V._addFilesFromDirectory(X,""+U+"/"+X.name)}}}}})(this);return R.readEntries(T,function(V){return typeof console!=="undefined"&&console!==null?typeof console.log==="function"?console.log(V):void 0:void 0})};O.prototype.accept=function(S,R){if(S.size>this.options.maxFilesize*1024*1024){return R(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(S.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize))}else{if(!O.isValidFile(S,this.options.acceptedFiles)){return R(this.options.dictInvalidFileType)}else{if((this.options.maxFiles!=null)&&this.getAcceptedFiles().length>=this.options.maxFiles){R(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles));return this.emit("maxfilesexceeded",S)}else{return this.options.accept.call(this,S,R)}}}};O.prototype.addFile=function(R){R.upload={progress:0,total:R.size,bytesSent:0};this.files.push(R);R.status=O.ADDED;this.emit("addedfile",R);this._enqueueThumbnail(R);return this.accept(R,(function(S){return function(T){if(T){R.accepted=false;S._errorProcessing([R],T)}else{R.accepted=true;if(S.options.autoQueue){S.enqueueFile(R)}}return S._updateMaxFilesReachedClass()}})(this))};O.prototype.enqueueFiles=function(S){var T,R,U;for(R=0,U=S.length;R<U;R++){T=S[R];this.enqueueFile(T)}return null};O.prototype.enqueueFile=function(R){if(R.status===O.ADDED&&R.accepted===true){R.status=O.QUEUED;if(this.options.autoProcessQueue){return setTimeout(((function(S){return function(){return S.processQueue()}})(this)),0)}}else{throw new Error("This file can't be queued because it has already been processed or was rejected.")}};O.prototype._thumbnailQueue=[];O.prototype._processingThumbnail=false;O.prototype._enqueueThumbnail=function(R){if(this.options.createImageThumbnails&&R.type.match(/image.*/)&&R.size<=this.options.maxThumbnailFilesize*1024*1024){this._thumbnailQueue.push(R);return setTimeout(((function(S){return function(){return S._processThumbnailQueue()}})(this)),0)}};O.prototype._processThumbnailQueue=function(){if(this._processingThumbnail||this._thumbnailQueue.length===0){return}this._processingThumbnail=true;return this.createThumbnail(this._thumbnailQueue.shift(),(function(R){return function(){R._processingThumbnail=false;return R._processThumbnailQueue()}})(this))};O.prototype.removeFile=function(R){if(R.status===O.UPLOADING){this.cancelUpload(R)}this.files=M(this.files,R);this.emit("removedfile",R);if(this.files.length===0){return this.emit("reset")}};O.prototype.removeAllFiles=function(T){var U,R,V,S;if(T==null){T=false}S=this.files.slice();for(R=0,V=S.length;R<V;R++){U=S[R];if(U.status!==O.UPLOADING||T){this.removeFile(U)}}return null};O.prototype.createThumbnail=function(T,R){var S;S=new FileReader;S.onload=(function(U){return function(){var V;V=document.createElement("img");V.onload=function(){var W,a,c,d,X,Y,Z,b;T.width=V.width;T.height=V.height;c=U.options.resize.call(U,T);if(c.trgWidth==null){c.trgWidth=U.options.thumbnailWidth}if(c.trgHeight==null){c.trgHeight=U.options.thumbnailHeight}W=document.createElement("canvas");a=W.getContext("2d");W.width=c.trgWidth;W.height=c.trgHeight;F(a,V,(X=c.srcX)!=null?X:0,(Y=c.srcY)!=null?Y:0,c.srcWidth,c.srcHeight,(Z=c.trgX)!=null?Z:0,(b=c.trgY)!=null?b:0,c.trgWidth,c.trgHeight);d=W.toDataURL("image/png");U.emit("thumbnail",T,d);if(R!=null){return R()}};return V.src=S.result}})(this);return S.readAsDataURL(T)};O.prototype.processQueue=function(){var R,S,U,T;S=this.options.parallelUploads;U=this.getUploadingFiles().length;R=U;if(U>=S){return}T=this.getQueuedFiles();if(!(T.length>0)){return}if(this.options.uploadMultiple){return this.processFiles(T.slice(0,S-U))}else{while(R<S){if(!T.length){return}this.processFile(T.shift());R++}}};O.prototype.processFile=function(R){return this.processFiles([R])};O.prototype.processFiles=function(S){var T,R,U;for(R=0,U=S.length;R<U;R++){T=S[R];T.processing=true;T.status=O.UPLOADING;this.emit("processing",T)}if(this.options.uploadMultiple){this.emit("processingmultiple",S)}return this.uploadFiles(S)};O.prototype._getFilesWithXhr=function(R){var T,S;return S=(function(){var V,X,W,U;W=this.files;U=[];for(V=0,X=W.length;V<X;V++){T=W[V];if(T.xhr===R){U.push(T)}}return U}).call(this)};O.prototype.cancelUpload=function(V){var X,W,T,Y,S,U,R;if(V.status===O.UPLOADING){W=this._getFilesWithXhr(V.xhr);for(T=0,S=W.length;T<S;T++){X=W[T];X.status=O.CANCELED}V.xhr.abort();for(Y=0,U=W.length;Y<U;Y++){X=W[Y];this.emit("canceled",X)}if(this.options.uploadMultiple){this.emit("canceledmultiple",W)}}else{if((R=V.status)===O.ADDED||R===O.QUEUED){V.status=O.CANCELED;this.emit("canceled",V);if(this.options.uploadMultiple){this.emit("canceledmultiple",[V])}}}if(this.options.autoProcessQueue){return this.processQueue()}};O.prototype.uploadFile=function(R){return this.uploadFiles([R])};O.prototype.uploadFiles=function(Z){var i,a,l,h,o,p,Y,e,W,n,u,R,j,S,r,g,b,q,w,m,f,X,U,c,d,k,V,s,t,T,v;g=new XMLHttpRequest();for(b=0,f=Z.length;b<f;b++){i=Z[b];i.xhr=g}g.open(this.options.method,this.options.url,true);g.withCredentials=!!this.options.withCredentials;j=null;l=(function(x){return function(){var y,z,Aa;Aa=[];for(y=0,z=Z.length;y<z;y++){i=Z[y];Aa.push(x._errorProcessing(Z,j||x.options.dictResponseError.replace("{{statusCode}}",g.status),g))}return Aa}})(this);S=(function(x){return function(y){var Ah,Ag,Ac,Ab,z,Aa,Ad,Ae,Af;if(y!=null){Ag=100*y.loaded/y.total;for(Ac=0,Aa=Z.length;Ac<Aa;Ac++){i=Z[Ac];i.upload={progress:Ag,total:y.total,bytesSent:y.loaded}}}else{Ah=true;Ag=100;for(Ab=0,Ad=Z.length;Ab<Ad;Ab++){i=Z[Ab];if(!(i.upload.progress===100&&i.upload.bytesSent===i.upload.total)){Ah=false}i.upload.progress=Ag;i.upload.bytesSent=i.upload.total}if(Ah){return}}Af=[];for(z=0,Ae=Z.length;z<Ae;z++){i=Z[z];Af.push(x.emit("uploadprogress",i,Ag,i.upload.bytesSent))}return Af}})(this);g.onload=(function(x){return function(z){var Aa;if(Z[0].status===O.CANCELED){return}if(g.readyState!==4){return}j=g.responseText;if(g.getResponseHeader("content-type")&&~g.getResponseHeader("content-type").indexOf("application/json")){try{j=JSON.parse(j)}catch(y){z=y;j="Invalid JSON response from server."}}S();if(!((200<=(Aa=g.status)&&Aa<300))){return l()}else{return x._finished(Z,j,z)}}})(this);g.onerror=(function(x){return function(){if(Z[0].status===O.CANCELED){return}return l()}})(this);R=(V=g.upload)!=null?V:g;R.onprogress=S;p={"Accept":"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"};if(this.options.headers){Q(p,this.options.headers)}for(h in p){o=p[h];g.setRequestHeader(h,o)}a=new FormData();if(this.options.params){s=this.options.params;for(n in s){r=s[n];a.append(n,r)}}for(q=0,X=Z.length;q<X;q++){i=Z[q];this.emit("sending",i,g,a)}if(this.options.uploadMultiple){this.emit("sendingmultiple",Z,g,a)}if(this.element.tagName==="FORM"){t=this.element.querySelectorAll("input, textarea, select, button");for(w=0,U=t.length;w<U;w++){Y=t[w];e=Y.getAttribute("name");W=Y.getAttribute("type");if(Y.tagName==="SELECT"&&Y.hasAttribute("multiple")){T=Y.options;for(m=0,c=T.length;m<c;m++){u=T[m];if(u.selected){a.append(e,u.value)}}}else{if(!W||((v=W.toLowerCase())!=="checkbox"&&v!=="radio")||Y.checked){a.append(e,Y.value)}}}}for(k=0,d=Z.length;k<d;k++){i=Z[k];a.append(""+this.options.paramName+(this.options.uploadMultiple?"[]":""),i,i.name)}return g.send(a)};O.prototype._finished=function(U,S,R){var V,T,W;for(T=0,W=U.length;T<W;T++){V=U[T];V.status=O.SUCCESS;this.emit("success",V,S,R);this.emit("complete",V)}if(this.options.uploadMultiple){this.emit("successmultiple",U,S,R);this.emit("completemultiple",U)}if(this.options.autoProcessQueue){return this.processQueue()}};O.prototype._errorProcessing=function(U,V,T){var R,W,S;for(W=0,S=U.length;W<S;W++){R=U[W];R.status=O.ERROR;this.emit("error",R,V,T);this.emit("complete",R)}if(this.options.uploadMultiple){this.emit("errormultiple",U,V,T);this.emit("completemultiple",U)}if(this.options.autoProcessQueue){return this.processQueue()}};return O})(G);D.version="3.8.7";D.options={};D.optionsForElement=function(O){if(O.getAttribute("id")){return D.options[E(O.getAttribute("id"))]}else{return void 0}};D.instances=[];D.forElement=function(O){if(typeof O==="string"){O=document.querySelector(O)}if((O!=null?O.dropzone:void 0)==null){throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.")}return O.dropzone};D.autoDiscover=true;D.discover=function(){var T,O,S,Q,R,P;if(document.querySelectorAll){S=document.querySelectorAll(".dropzone")}else{S=[];T=function(W){var U,V,Y,X;X=[];for(V=0,Y=W.length;V<Y;V++){U=W[V];if(/(^| )dropzone($| )/.test(U.className)){X.push(S.push(U))}else{X.push(void 0)}}return X};T(document.getElementsByTagName("div"));T(document.getElementsByTagName("form"))}P=[];for(Q=0,R=S.length;Q<R;Q++){O=S[Q];if(D.optionsForElement(O)!==false){P.push(new D(O))}else{P.push(void 0)}}return P};D.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i];D.isBrowserSupported=function(){var O,Q,P,S,R;O=true;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector){if(!("classList" in document.createElement("a"))){O=false}else{R=D.blacklistedBrowsers;for(P=0,S=R.length;P<S;P++){Q=R[P];if(Q.test(navigator.userAgent)){O=false;continue}}}}else{O=false}return O};M=function(S,P){var R,Q,T,O;O=[];for(Q=0,T=S.length;Q<T;Q++){R=S[Q];if(R!==P){O.push(R)}}return O};E=function(O){return O.replace(/[\-_](\w)/g,function(P){return P.charAt(1).toUpperCase()})};D.createElement=function(O){var P;P=document.createElement("div");P.innerHTML=O;return P.childNodes[0]};D.elementInside=function(P,O){if(P===O){return true}while(P=P.parentNode){if(P===O){return true}}return false};D.getElement=function(O,P){var Q;if(typeof O==="string"){Q=document.querySelector(O)}else{if(O.nodeType!=null){Q=O}}if(Q==null){throw new Error("Invalid `"+P+"` option provided. Please provide a CSS selector or a plain HTML element.")}return Q};D.getElements=function(V,Q){var O,Y,P,U,W,T,R,S;if(V instanceof Array){P=[];try{for(U=0,T=V.length;U<T;U++){Y=V[U];P.push(this.getElement(Y,Q))}}catch(X){O=X;P=null}}else{if(typeof V==="string"){P=[];S=document.querySelectorAll(V);for(W=0,R=S.length;W<R;W++){Y=S[W];P.push(Y)}}else{if(V.nodeType!=null){P=[V]}}}if(!((P!=null)&&P.length)){throw new Error("Invalid `"+Q+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.")}return P};D.confirm=function(Q,O,P){if(window.confirm(Q)){return O()}else{if(P!=null){return P()}}};D.isValidFile=function(T,O){var R,P,S,Q,U;if(!O){return true}O=O.split(",");P=T.type;R=P.replace(/\/.*$/,"");for(Q=0,U=O.length;Q<U;Q++){S=O[Q];S=S.trim();if(S.charAt(0)==="."){if(T.name.toLowerCase().indexOf(S.toLowerCase(),T.name.length-S.length)!==-1){return true}}else{if(/\/\*$/.test(S)){if(R===S.replace(/\/.*$/,"")){return true}}else{if(P===S){return true}}}}return false};if(typeof jQuery!=="undefined"&&jQuery!==null){jQuery.fn.dropzone=function(O){return this.each(function(){return new D(this,O)})}}if(typeof B!=="undefined"&&B!==null){B.exports=D}else{window.Dropzone=D}D.ADDED="added";D.QUEUED="queued";D.ACCEPTED=D.QUEUED;D.UPLOADING="uploading";D.PROCESSING=D.UPLOADING;D.CANCELED="canceled";D.ERROR="error";D.SUCCESS="success";J=function(P){var S,O,T,R,V,Q,U,X,Y,W;U=P.naturalWidth;Q=P.naturalHeight;O=document.createElement("canvas");O.width=1;O.height=Q;T=O.getContext("2d");T.drawImage(P,0,0);R=T.getImageData(0,0,1,Q).data;W=0;V=Q;X=Q;while(X>W){S=R[(X-1)*4+3];if(S===0){V=X}else{W=X}X=(V+W)>>1}Y=X/Q;if(Y===0){return 1}else{return Y}};F=function(S,P,X,U,Q,W,V,T,O,R){var Y;Y=J(P);return S.drawImage(P,X,U,Q,W,V,T,O,R/Y)};H=function(Y,U){var W,V,O,S,T,P,Z,X,Q;O=false;Q=true;V=Y.document;X=V.documentElement;W=(V.addEventListener?"addEventListener":"attachEvent");Z=(V.addEventListener?"removeEventListener":"detachEvent");P=(V.addEventListener?"":"on");S=function(a){if(a.type==="readystatechange"&&V.readyState!=="complete"){return}(a.type==="load"?Y:V)[Z](P+a.type,S,false);if(!O&&(O=true)){return U.call(Y,a.type||a)}};T=function(){var b;try{X.doScroll("left")}catch(a){b=a;setTimeout(T,50);return}return S("poll")};if(V.readyState!=="complete"){if(V.createEventObject&&X.doScroll){try{Q=!Y.frameElement}catch(R){}if(Q){T()}}V[W](P+"DOMContentLoaded",S,false);V[W](P+"readystatechange",S,false);return Y[W](P+"load",S,false)}};D._autoDiscoverFunction=function(){if(D.autoDiscover){return D.discover()}};H(window,D._autoDiscoverFunction)}).call(this)});if(typeof exports=="object"){module.exports=A("dropzone")}else{if(typeof define=="function"&&define.amd){define([],function(){return A("dropzone")})}else{this["Dropzone"]=A("dropzone")}}})();